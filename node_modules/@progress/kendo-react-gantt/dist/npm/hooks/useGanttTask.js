"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useGanttTask = void 0;
var React = require("react");
var GanttViewContext_1 = require("../context/GanttViewContext");
var useDictionaryStore_1 = require("./useDictionaryStore");
/** @hidden */
var useGanttTask = function (dataItem, id, ref, taskElementRef) {
    var taskRef = React.useRef(null);
    var _a = (0, GanttViewContext_1.useGanttViewTasksContext)(), dispatchTaskRef = _a[1];
    React.useImperativeHandle(taskRef, function () { return ({ element: taskElementRef.current, dataItem: dataItem }); });
    React.useImperativeHandle(ref, function () { return taskRef.current; });
    React.useLayoutEffect(function () {
        var target = taskRef.current;
        if (target) {
            dispatchTaskRef({
                type: useDictionaryStore_1.STORE_ACTION.add,
                itemRef: target,
                id: id
            });
            return function () {
                dispatchTaskRef({
                    type: useDictionaryStore_1.STORE_ACTION.remove,
                    itemRef: target,
                    id: id
                });
            };
        }
    });
};
exports.useGanttTask = useGanttTask;
