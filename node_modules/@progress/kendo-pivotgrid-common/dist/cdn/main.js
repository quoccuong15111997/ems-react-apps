!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("tslib"),require("@progress/kendo-data-query")):"function"==typeof define&&define.amd?define([,],r):"object"==typeof exports?exports.KendoPivotgridCommon=r(require("tslib"),require("@progress/kendo-data-query")):e.KendoPivotgridCommon=r(e.self,e.KendoDataQuery)}(window,(function(e,r){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=10)}([function(r,t){r.exports=e},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);r.getMaxNesting=function(e,t){return void 0===t&&(t=new Set),(e.children||[]).forEach((function(e){t.add(e.levelName),r.getMaxNesting(e,t)})),t.size},r.getMaxExpansion=function(e){var t=0;return(e.children||[]).forEach((function(e){t+=r.getMaxExpansion(e)||1})),t},r.generateNormalizedPath=function(e,r){return(r&&r.hierarchy===e.hierarchy?(r.normalizedPath||[]).slice(0,-1).concat([e.name||null]):(r&&r.normalizedPath?r.normalizedPath:[]).concat([e.name])).filter(Boolean)},r.generatePath=function(e,r){return(r&&r.hierarchy===e.hierarchy?(r.path||[]).slice(0,-1).concat([(0===e.levelNum?e.hierarchy:e.name)||null]):(r&&r.path?r.path:[]).concat([0===e.levelNum?e.hierarchy:e.name])).filter(Boolean)},r.toMatrix=function(e,t,n,a,o,i,u,s){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===a&&(a=void 0),void 0===o&&(o=void 0),void 0===i&&(i=void 0),void 0===u&&(u=void 0),void 0===s&&(s=void 0);var l=r.getMaxNesting(e),c=r.getMaxExpansion(e),f=a||l,p=o||c,d=i?i.slice():[],m=u?u.slice():new Array(p),v=d.findIndex((function(r){return r&&r.name===e.levelName&&r.level===e.levelNum})),h=d[v],g={name:e.levelName,level:e.levelNum,index:t,cells:new Array(p).fill(null)},y=-1!==t&&-1!==n,A={caption:e.caption,name:e.name,levelName:e.levelName,levelNum:e.levelNum,hasChildren:e.hasChildren,parentName:e.parentName,hierarchy:e.hierarchy,total:void 0!==e.total&&e.total||s&&s.children.length<=1&&s.total,parent:s,rowIndex:t,colIndex:n,depth:1,breadth:1,path:e.path||[],normalizedPath:e.normalizedPath||[],children:e.children.filter((function(r){return r.hierarchy===e.hierarchy}))};if(y)if(h)h.cells[n]=A,h.index>=t&&(t=h.index);else if(d[t]&&d[t].cells.length){for(var _=t;_<d.length;_++){d[_].index++}d.splice(t,0,g),d[t].cells[n]=A}else d[t]=g,d[t].cells[n]=A;var E=0;return e.children&&e.children.length?e.children.forEach((function(e){var a=r.toMatrix(e,t+1,n+E,f,p,d,m,A),o=a[0],i=a[1],u=a[3];E+=u||1,d=o.slice(),m=i.slice()})):e.normalizedPath&&(m[n]={total:A.total,path:e.normalizedPath}),A.depth=l,A.breadth=c,[d,m,l,c]};var a=function(e,r,t){var o;void 0===r&&(r=null),void 0===t&&(t=0);for(var i=n.__assign({},e,{total:!0,hasChildren:!1,children:[]}),u=0;u<e.children.length;u++){var s=a(e.children[u],e,u);o=o||s.hierarchy,s.hierarchy===o||!r||r.children.some((function(e){return e.total&&e.name===i.name}))||e.total||(i.children.push(s),e.children.splice(u,1),u--)}if(e.children.filter((function(e){return!e.total})).length>=1&&r&&!r.children.some((function(e){return e.total&&e.name===i.name}))&&!e.total){var l=e.children[0].hierarchy;e.hierarchy===l&&r.children.splice(t+1,0,i)}return e};r.toTree=function(e){for(var t={children:[]},n={},o=0;o<e.length;o++)for(var i=u(e[o]),s="",l=function(e){var a,o=i.members[e];if(t.children&&0===t.children.length)a=t;else if(n[s]&&!n[s+o.name]&&0===o.levelNum)a=n[s];else if(n[s+o.parentName]&&o.levelNum>0&&!n[s+o.parentName+o.name])a=n[s+o.parentName];else if(!n[s+o.parentName]&&o.levelNum>0&&!n[s+o.parentName+o.name]){var u=Object.keys(n).find((function(e){return o.parentName===n[e].name}));u&&(a=n[u])}if(a){o.path=r.generatePath(o,a),o.normalizedPath=r.generateNormalizedPath(o,a);var l=a.children.findIndex((function(e){return e.hierarchy!==a.hierarchy}));-1!==l?a.children.splice(l,0,o):a.children.push(o)}o.parentName+=o.name,s+=o.parentName,n[s]||(n[s]=o)},c=0;c<i.members.length;c++)l(c);return u(a(t))},r.toData=function(e,r,t,n,a){var o=Array.from(new Array(a),(function(){return{cells:Array.from(new Array(n),(function(){return null}))}})),i=function(e){return e.join("|")},u=function(e){return e.members.map((function(e){return e.name}))},s=new Map,l=new Map;return r.forEach((function(e,r){s.set(i(e.path),r)})),t.forEach((function(e,r){l.set(i(e.path),r)})),e.forEach((function(e){var r=s.get(i(u(e.columnTuple))),n=l.get(i(u(e.rowTuple)));void 0!==r&&void 0!==n&&(o[n].cells[r]||(o[n].row=t[n].path,o[n].cells[r]=e))})),o};function o(e,r){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];r[t]=i(n,r[t])}}function i(e,t){if(Array.isArray(e))return s(e);if(e instanceof Date)return r.cloneDate(e);if(e&&"object"==typeof e){var n=t||{};return o(e,n),n}return e}function u(e){return JSON.parse(JSON.stringify(e))}function s(e){return e.map((function(e){return i(e,void 0)}))}r.toColumns=function(e){for(var t=r.toMatrix(e),n=t[0],a=t[1],o=t[2],i=t[3],u=0;u<i;u++)for(var s=null,l=0;l<o;l++)if(n[l]){var c=n[l].cells[u];!c&&s&&(s.rowSpan=(s.rowSpan||1)+1),s&&(s.colSpan=s.breadth||1),c&&(s=c)}return[n,a,o,i]},r.toRows=function(e){for(var t=r.toMatrix(e),a=t[0],o=t[1],i=t[2],u=t[3],s=0;s<u;s++)for(var l=null,c=0;c<i;c++)if(a[c]){var f=a[c].cells[s];!f&&l&&(l.rowSpan=(l.rowSpan||1)+1),l&&(l.colSpan=l.breadth),f&&(l=f)}return function(e,r,t,a){for(var o=new Array(a),i=0;i<a;i++)for(var u=0;u<t;u++)if(e[u]&&e[u].cells[i]){var s=e[u].cells[i];o[i]||(o[i]={cells:new Array(t).fill(null)}),o[i].cells[u]=n.__assign({},s,{rowSpan:s.colSpan,colSpan:s.rowSpan})}return[o,r,a,t]}(a,o,i,u)},r.cloneDate=function(e){return e?new Date(e.getTime()):null},r.clone=function(e){var r={};return o(e,r),r},r.cloneObject=o,r.cloneValue=i,r.copy=u,r.cloneArray=s;var l=function(e,r,t){return{hierarchyUniqueName:e,uniqueName:r,caption:r,measure:r,name:r,type:t,kpi:!0}};r.buildKPIMeasures=function(e){var r=e.name;return[l(r,e.value,"value"),l(r,e.goal,"goal"),l(r,e.status,"status"),l(r,e.trend,"trend")]},r.addKPI=function(e){for(var r,t=0;t<e.length;t++)if(2===e[t].type){r=!0;break}r&&e.splice(t+1,0,{caption:"KPIs",defaultHierarchy:"[KPIs]",name:"KPIs",uniqueName:"[KPIs]"})},r.compareAxisWithField=function(e,r){return String(e.name)===String([r.defaultHierarchy?r.defaultHierarchy:r.uniqueName])},r.compareAxes=function(e,r){return String(e.name)===String(r.name)},r.filterField=function(e,t){for(var a=function(a){var o=e[a],i=o.name.findIndex((function(e){return r.compareAxisWithField({name:[e]},t)||String(e).startsWith(t.uniqueName)}));if(-1!==i)if(i===o.name.length-1||1===o.name.length)e.splice(a,1);else{o.name.splice(i,1);var u=e.findIndex((function(e){return e!==o&&String(e.name)===String(o.name)}));-1!==u&&(e[u]=n.__assign({},e[u],o,e[u].expand||o.expand?{expand:!0}:{}),e.splice(a,1))}},o=e.length-1;o>=0;o--)a(o)},r.insertAxis=function(e,t,n){var a=-1;if(n.dropTarget&&n.dropDirection){var o=n.dropDirection?"before"===n.dropDirection?0:1:0;a=e.findIndex((function(e){return r.compareAxes(e,n.dropTarget)}))+o}-1!==a?(e.forEach((function(e){var r;e.expand&&e.name.length>1&&e.name.length>a&&(r=e.name).splice.apply(r,[a,0].concat(t.name))})),e.splice(a,0,t)):e.push(t)},r.reverseColumnsByMeasures=function(e){var r=e.length&&e[0],t=r&&r.members[r.members.length-1];if(t&&"[Measures]"===t.hierarchy){for(var n=[],a=new Set(e.map((function(e){return e.members[e.members.length-1].caption}))).size,o=0;o<e.length;o+=a)n.push(e.slice(o,o+a));var i=[];return n.forEach((function(e){i.push.apply(i,e.reverse())})),i}return e}},function(e,r,t){"use strict";function n(e,r){var t=e.querySelector(r);return t?t.textContent:""}Object.defineProperty(r,"__esModule",{value:!0}),r.parseResponse=function(e){var r=(new DOMParser).parseFromString(e,"text/xml"),t=Array.from(r.querySelectorAll("Axis")),a=Array.from(r.querySelectorAll("CellData > Cell")).map((function(e){return{fmtValue:n(e,"FmtValue"),ordinal:parseInt(e.getAttribute("CellOrdinal"),10),value:n(e,"Value")}})),o={tuples:[]},i={tuples:[]},u=[];t.forEach((function(e){if("SlicerAxis"!==e.getAttribute("name")){var r=0===o.tuples.length?o.tuples:i.tuples;Array.prototype.push.apply(r,function(e){return Array.from(e.querySelectorAll("Tuple")).map((function(e){return{members:Array.from(e.querySelectorAll("Member")).map((function(e){var r=parseInt(n(e,"LNum")||"0",10),t=parseInt(n(e,"CHILDREN_CARDINALITY")||"0",10)>0;return{caption:n(e,"Caption"),children:[],hasChildren:t,hierarchy:e.getAttribute("Hierarchy"),levelName:n(e,"LName"),levelNum:r,name:n(e,"UName"),parentName:n(e,"PARENT_UNIQUE_NAME")}}))}}))}(e))}}));var s=new Array(i.tuples.length*o.tuples.length).fill(null);a.forEach((function(e){s[e.ordinal]=e}));var l=0;return i.tuples.forEach((function(e){o.tuples.forEach((function(r){u.push({columnTuple:r,data:s[l],rowTuple:e}),l++}))})),{columns:o,data:u,rows:i}},r.getPropertyValue=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.subNode=function(e,r,t){var n=e.get(r);return n||(n=t||new Map,e.set(r,n)),n};r.createKey=function(e,r){return e+"&"+r},r.splitKeyValue=function(e){var r=e.indexOf("&");return-1!==r?[e.substring(0,r),e.substring(r+1)]:[e,void 0]}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(11),a=t(12);r.createRequestBody=function(e){var r='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Execute xmlns="urn:schemas-microsoft-com:xml-analysis"><Command><Statement>',t=e.columnAxes,o=void 0===t?[]:t,i=e.rowAxes,u=void 0===i?[]:i,s=e.measureAxes,l=void 0===s?[]:s,c=e.sort,f=void 0===c?[]:c,p=e.filter,d=void 0===p?[]:p,m="rows"===e.measuresAxis;return r+="SELECT NON EMPTY {",!o.length&&u.length&&(!l.length||l.length&&m)&&(o=u,u=[],m=!1),o.length||u.length||(m=!1),o.length?r+=a.serializeMembers(o,m?[]:l,f):l.length&&!m&&(r+=a.measureNames(l).join(",")),r+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS",(u.length||m&&l.length>1)&&(r+=", NON EMPTY {",u.length?r+=a.serializeMembers(u,m?l:[],f):r+=a.measureNames(l).join(","),r+="} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS"),d.length?(r+=" FROM ",r+="(",r+=n.serializeFilters(d,e.connection.cube),r+=")"):r+=" FROM ["+e.connection.cube+"]",1===l.length&&o.length&&(r+=" WHERE ("+a.measureNames(l).join(",")+")"),(r+="</Statement></Command><Properties><PropertyList><Catalog>"+e.connection.catalog+"</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>").replace(/&/g,"&amp;")}},function(e,r,t){"use strict";function n(e,r,t){var n="";if(r){n+="<"+e+">";var a=void 0;for(var o in r)r[o]&&(a=r[o],t&&(o=o.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g,"$1_").toUpperCase().replace(/_$/,"")),n+="<"+o+">"+a+"</"+o+">");n+="</"+e+">"}else n+="<"+e+"/>";return n}Object.defineProperty(r,"__esModule",{value:!0}),r.discoverCommands={schemaCatalogs:"DBSCHEMA_CATALOGS",schemaCubes:"MDSCHEMA_CUBES",schemaDimensions:"MDSCHEMA_DIMENSIONS",schemaHierarchies:"MDSCHEMA_HIERARCHIES",schemaKPIs:"MDSCHEMA_KPIS",schemaLevels:"MDSCHEMA_LEVELS",schemaMeasures:"MDSCHEMA_MEASURES",schemaMembers:"MDSCHEMA_MEMBERS"},r.createDiscoverBody=function(e){var t={},a='<Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"><Header/><Body><Discover xmlns="urn:schemas-microsoft-com:xml-analysis">';return a+="<RequestType>"+(r.discoverCommands[e.command]||e.command)+"</RequestType>",a+="<Restrictions>"+n("RestrictionList",e.restrictions,!0)+"</Restrictions>",e.connection&&e.connection.catalog&&(t.Catalog=e.connection.catalog),a+="<Properties>"+n("PropertyList",t,!1)+"</Properties>",a+="</Discover></Body></Envelope>"}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=t(0),o=t(1);!function(e){e.toggleSelection="PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION",e.addColumnAxis="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS",e.addColumnAxes="PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES",e.removeColumnAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS",e.removeColumnAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES",e.addRowAxis="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS",e.addRowAxes="PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES",e.removeRowAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS",e.removeRowAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES",e.addMeasureAxis="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS",e.addMeasureAxes="PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES",e.removeMeasureAxis="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS",e.removeMeasureAxes="PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES",e.remove="PIVOT_CONFIGURATOR_ACTION_REMOVE",e.setSort="PIVOT_CONFIGURATOR_ACTION_SET_SORT",e.setFilter="PIVOT_CONFIGURATOR_ACTION_SET_FILTER",e.addFilter="PIVOT_CONFIGURATOR_ACTION_ADD_FILTER",e.changeFilter="PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER",e.removeFilter="PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER",e.setDragItem="PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM",e.drop="PIVOT_CONFIGURATOR_ACTION_DROP",e.setDropZone="PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE",e.setDropTarget="PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET",e.setDropDirection="PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION"}(n=r.PIVOT_CONFIGURATOR_ACTION||(r.PIVOT_CONFIGURATOR_ACTION={})),r.configuratorReducer=function(e,t){var i,u,s,l,c,f,p,d,m;switch(t.type){case n.toggleSelection:if(!Array.isArray(t.payload)){var v=t.payload;if(2===v.type||"aggregator"in v)return e.measureAxes.some((function(e){return o.compareAxisWithField(e,v)}))?r.configuratorReducer(e,a.__assign({},t,{type:n.removeMeasureAxis})):r.configuratorReducer(e,a.__assign({},t,{type:n.addMeasureAxis}));if("kpi"===v.type){var h=o.buildKPIMeasures(v);return h.every((function(r){return e.measureAxes.some((function(e){return o.compareAxisWithField(e,r)}))}))?r.configuratorReducer(e,a.__assign({},t,{type:n.removeMeasureAxes,payload:h})):r.configuratorReducer(e,a.__assign({},t,{type:n.addMeasureAxes,payload:h.filter((function(r){return!e.measureAxes.some((function(e){return o.compareAxisWithField(e,r)}))}))}))}return t.payload.kpi?e.measureAxes.some((function(e){return o.compareAxisWithField(e,v)}))?r.configuratorReducer(e,a.__assign({},t,{type:n.removeMeasureAxis})):r.configuratorReducer(e,a.__assign({},t,{type:n.addMeasureAxis})):e.columnAxes.some((function(e){return o.compareAxisWithField(e,v)}))?r.configuratorReducer(e,a.__assign({},t,{type:n.removeColumnAxis})):e.rowAxes.some((function(e){return o.compareAxisWithField(e,v)}))?r.configuratorReducer(e,a.__assign({},t,{type:n.removeRowAxis})):!e.columnAxes||!e.columnAxes.length||e.rowAxes&&e.rowAxes.length?r.configuratorReducer(e,a.__assign({},t,{type:n.addColumnAxis})):r.configuratorReducer(e,a.__assign({},t,{type:n.addRowAxis}))}break;case n.addColumnAxis:u=(e.columnAxes||[]).concat([{name:[t.payload.defaultHierarchy||t.payload.uniqueName]}]);break;case n.addColumnAxes:break;case n.removeColumnAxis:u=(e.columnAxes||[]).filter((function(e){return!o.compareAxisWithField(e,t.payload)})).slice(),o.filterField(u,t.payload);break;case n.removeColumnAxes:break;case n.addRowAxis:i=(e.rowAxes||[]).concat([{name:[t.payload.defaultHierarchy||t.payload.uniqueName]}]);break;case n.addRowAxes:break;case n.removeRowAxis:i=(e.rowAxes||[]).filter((function(e){return!o.compareAxisWithField(e,t.payload)})).slice(),o.filterField(i,t.payload);break;case n.removeRowAxes:break;case n.addMeasureAxis:s=(e.measureAxes||[]).concat([{name:[t.payload.defaultHierarchy||t.payload.uniqueName]}]);break;case n.removeMeasureAxis:s=(e.measureAxes||[]).filter((function(e){return!o.compareAxisWithField(e,t.payload)})).slice();break;case n.addMeasureAxes:s=(e.measureAxes||[]).concat((t.payload||[]).map((function(e){return{name:[e.defaultHierarchy||e.uniqueName]}})));break;case n.removeMeasureAxes:s=(e.measureAxes||[]).filter((function(e){return!t.payload.some((function(r){return o.compareAxisWithField(e,r)}))})).slice();break;case n.remove:e.columnAxes.some((function(e){return o.compareAxes(e,t.payload)}))&&(u=e.columnAxes.filter((function(e){return!o.compareAxes(e,t.payload)})).slice(),o.filterField(u,{uniqueName:t.payload.name})),e.rowAxes.some((function(e){return o.compareAxes(e,t.payload)}))&&(i=e.rowAxes.filter((function(e){return!o.compareAxes(e,t.payload)})).slice(),o.filterField(i,{uniqueName:t.payload.name})),e.measureAxes.some((function(e){return o.compareAxes(e,t.payload)}))&&(s=e.measureAxes.filter((function(e){return!o.compareAxes(e,t.payload)})).slice());break;case n.setDragItem:f=t.payload;break;case n.setDropZone:p=t.payload;break;case n.setDropTarget:m=t.payload;break;case n.setDropDirection:d=t.payload;break;case n.drop:if(e.dragItem&&e.dropZone){var g=e.columnAxes.find((function(e){return o.compareAxes(e,t.payload)})),y=e.rowAxes.find((function(e){return o.compareAxes(e,t.payload)})),A=e.measureAxes.find((function(e){return o.compareAxes(e,t.payload)})),_=void 0;switch(g&&(_=g,u=e.columnAxes.filter((function(e){return!o.compareAxes(e,t.payload)})).slice(),o.filterField(u,{uniqueName:t.payload.name})),y&&(_=y,i=e.rowAxes.filter((function(e){return!o.compareAxes(e,t.payload)})).slice(),o.filterField(i,{uniqueName:t.payload.name})),A&&(_=A,s=e.measureAxes.filter((function(e){return!o.compareAxes(e,t.payload)})).slice()),e.dropZone){case"columnAxes":u=u||e.columnAxes.slice(),o.insertAxis(u,_,e);break;case"rowAxes":i=i||e.rowAxes.slice(),o.insertAxis(i,_,e);break;case"measureAxes":s=s||e.measureAxes.slice(),o.insertAxis(s,_,e)}}f=null,p=null,m=null;break;case n.setSort:l=t.payload;break;case n.setFilter:c=Array.isArray(t.payload)?t.payload:[t.payload];break;case n.addFilter:c=(e.filter||[]).slice(),Array.isArray(t.payload)?c.push.apply(c,t.payload):c.push(t.payload);break;case n.changeFilter:c=Array.isArray(t.payload)?(e.filter||[]).map((function(e){return t.payload.some((function(r){return r.field===e.field}))?t.payload.find((function(r){return r.field===e.field})):e})):(e.filter||[]).map((function(e){return e.field===t.payload.field?t.payload:e}));break;case n.removeFilter:c=(e.filter||[]).slice(),c=Array.isArray(t.payload)?c.filter((function(e){return!t.payload.some((function(r){return r.field===e.field&&r.operator===e.operator}))})):c.filter((function(e){return!(e.field===t.payload.field&&e.operator===t.payload.operator)}))}return{dragItem:f,dropTarget:m,dropDirection:d,dropZone:p,columnAxes:u,rowAxes:i,measureAxes:s,filter:c,sort:l}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(23),a=t(3),o=function(e,r,t){e.forEach((function(n,i){if(i!==t){n.size>0&&o(n,r,t);var u=n.get(t),s=a.subNode(e,t,{});r.forEach((function(e){e.aggregate.init(s),e.aggregate.merge(u,s)}))}}))};r.mergeTrees=function(e,t,n,o){e.forEach((function(e,i){var u;i!==o?(u=a.subNode(t,i),r.mergeTrees(e,u,n,o)):(u=a.subNode(t,i,{}),n.forEach((function(r){r.aggregate.init(u),r.aggregate.merge(e,u)})))}))};var i=function(e,t,n,o){e.forEach((function(u,s){if(s!==n){u.size>0&&i(u,t,n,o);var l=a.subNode(u,n),c=a.subNode(e,n);r.mergeTrees(l,c,t,o)}}))};r.createDataTree=function(e,r,t,u,s,l){var c=new Map,f=new Map,p=r.concat(t),d=new Set,m=s.dataField,v=s.columnsData,h=n.initializeFiltering(r,t,l),g=h.hasFilter,y=h.predicate,A=h.filteringAxes;return e.forEach((function(e){if(g){var n={};if(A.forEach((function(r){n[r.key]=r.displayValue(e)})),!y(n))return}var o=p.map((function(r){return r.displayValue(e)})),i="".concat.apply("",o),s=f.get(i);if(!s){var l=c,h=function(r){l=a.subNode(l,a.createKey(r.key,r.displayValue(e)))};r.forEach(h),l=a.subNode(l,v),d.add(l),t.forEach(h),s={},l.set(m,s),f.set(i,s),u.forEach((function(e){e.aggregate.init(s)}))}u.forEach((function(r){r.aggregate.accumulate(s,r.value(e))}))})),d.forEach((function(e){return o(e,u,m)})),i(c,u,v,m),c},r.cloneDataTree=function(e,t,n){var a=new Map;return r.mergeTrees(e,a,n,t),a}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(7),a=t(3),o=function(e,r,t){var n=a.splitKeyValue(e),o=n[0],i=n[1],u=t.slice();if(o&&i){var s=r.find((function(e){return e.key===o})),l=s?s.caption:"";return u.map((function(r){return r===l?e:r}))}return u},i=function(e,r,t,i,u,s,l){for(var c=l||new Map,f=i.map((function(e){return e.caption}));r.length>1&&i.some((function(e){return e.caption===r[r.length-1].caption}));)r.pop(),f.pop();var p=e;return r.forEach((function(e,r){if(f=o(e.name,i,f),p&&!i.some((function(r){return r.caption===e.name}))){if(!p.has(e.name)&&!c.has(f.slice(0,f.indexOf(e.name)+1).join("-")))for(var l=Array.from(p).find((function(e){return e[0]!==t})),d=l&&l[0],m=d&&a.splitKeyValue(d)[0],v=m?r-i.findIndex((function(e){return e.key===m})):0,h=function(r){var a=[];p.forEach((function(e,r){r!==t&&a.push.apply(a,Array.from(e).filter((function(e){return e[0]!==t})))}));var l=new Map;a.forEach((function(e){if(l.has(e[0])){var r=l.get(e[0]),t=e[1],a=new Map;n.mergeTrees(r,a,u,s),n.mergeTrees(t,a,u,s),l.set(e[0],a)}else l.set(e[0],new Map(e[1]))}));var d=f.slice(0,f.indexOf(e.name));l.forEach((function(e,r){c.set(o(r,i,d.concat([r])).join("-"),e)})),l.set(t,p.get(t)),p=l},g=0;g<v;g++)h();p=p.get(e.name)||c.get(f.slice(0,f.indexOf(e.name)+1).join("-"))}})),p};r.readData=function(e,r,t,n,a,o,u){var s=[],l=n.dataField,c=n.columnsData,f=new Map;return r.forEach((function(r){var n=i(e,r.members.slice(),c,o,u,l,f),p=n&&n.get(c);t.forEach((function(e){var t=e.members.slice(),n=u[0];if("[Measures].[MeasuresLevel]"===t[t.length-1].levelName){var o=t.pop();n=u.find((function(e){return String(e.name)===o.caption}))||n}var c=p&&i(p,t,l,a,u,l),f="",d="";if(c&&n){var m=n.aggregate.result(c.get(l));f=String(m),d=n.aggregate.format(m)}s.push({columnTuple:e,data:{fmtValue:d,ordinal:0,value:f},rowTuple:r})}))})),s}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){this.tabIndex=0,this.root=null,this.eventHandlers={},this.update=function(){},this.tabIndex=e.tabIndex}return Object.defineProperty(e.prototype,"elements",{get:function(){return this.root?Array.from(this.root.querySelectorAll(this.selectors.join(","))):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this.root&&this.root.querySelector(this.selectors.join(","))||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var e=this.elements;return e[e.length-1]||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.elements.find((function(e){return e.matches(":focus")}))},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var r=this;this.root=e;var t=function(t){n.mouseEvents[t]&&(n.eventHandlers[t]=function(e){var n=e.target instanceof Element&&e.target.closest(r.selectors.join(","));n&&r.mouseEvents[t].call(void 0,n,r,e)},e.addEventListener(t,n.eventHandlers[t]))},n=this;for(var a in this.mouseEvents)t(a);var o=function(t){i.keyboardEvents[t]&&(i.eventHandlers[t]=function(e){var n=e.target instanceof Element&&e.target.closest(r.selectors.join(",")),a=" "===e.key?"Space":e.key;n&&r.keyboardEvents[t][a]&&r.keyboardEvents[t][a].call(void 0,n,r,e)},e.addEventListener(t,i.eventHandlers[t]))},i=this;for(var a in this.keyboardEvents)o(a)},e.prototype.stop=function(){if(this.root)for(var e in this.eventHandlers)this.eventHandlers[e]&&this.root.removeEventListener(e,this.eventHandlers[e]);this.root=null},e.prototype.focusElement=function(e,r){e&&(r&&(r.removeAttribute("tabindex"),r.classList.remove("k-focus")),e.setAttribute("tabindex",String(this.tabIndex)),e.focus({preventScroll:!0}))},e}();r.Navigation=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),a=t(4);r.createRequestBody=a.createRequestBody;var o=t(13);r.fetchData=o.fetchData,r.fetchDiscover=o.fetchDiscover;var i=t(5);r.createDiscoverBody=i.createDiscoverBody,r.discoverCommands=i.discoverCommands;var u=t(15);r.createDataState=u.createDataState;var s=t(16);r.createAxisDescriptors=s.createAxisDescriptors;var l=t(17);r.setSort=l.setSort;var c=t(18);r.setFilter=c.setFilter;var f=t(2);r.parseResponse=f.parseResponse;var p=t(1);r.addKPI=p.addKPI,r.buildKPIMeasures=p.buildKPIMeasures,r.toTree=p.toTree,r.toColumns=p.toColumns,r.toRows=p.toRows,r.toData=p.toData,r.compareAxes=p.compareAxes;var d=t(19);r.headersReducer=d.headersReducer,r.HEADERS_ACTION=d.HEADERS_ACTION,n.__exportStar(t(6),r),n.__exportStar(t(21),r);var m=t(27);r.PivotGridNavigation=m.PivotGridNavigation,r.ConfiguratorNavigation=m.ConfiguratorNavigation},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={contains:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}") > 0',doesnotcontain:', InStr({0}.CurrentMember.MEMBER_CAPTION,"{1}")',endswith:', Right({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"',eq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',neq:', {0}.CurrentMember.MEMBER_CAPTION = "{1}"',startswith:', Left({0}.CurrentMember.MEMBER_CAPTION,Len("{1}"))="{1}"'},a="doesnotcontain",o="in",i="neq";function u(e){var r="",t=String(e.value),u=e.field,s=e.operator;return s===o?(r+="{",r+=t,r+="}"):(r+=s===i||s===a?"-":"",r+="Filter(",r+=u+".MEMBERS",r+=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return r.forEach((function(r,t){e=e.replace(new RegExp("\\{"+t+"\\}","g"),r)})),e}(n[s],u,t),r+=")"),r}r.serializeFilters=function(e,r){for(var t="",n="",a=e.length-1;a>=0;a--)n="SELECT (",n+=u(e[a]),n+=") ON 0",t=a===e.length-1?n+=" FROM ["+r+"]":n+" FROM ( "+t+" )";return t}},function(e,r,t){"use strict";function n(e){for(var r,t=e.length,n=[],a=0;a<t;a++)r=e[a],n.push(void 0!==r.name?r.name:r);return n}function a(e,r){var t=r.length;r=r.slice(0);for(var n=0;n<e.length;n++)for(var a=e[n],o=0;o<t;o++){var i=u(r[o]);if(-1!==a.indexOf(i)){r[o]=a;break}}return r}function o(e,r){var t=e.slice(0);return r.length>1&&t.push("{"+n(r).join(",")+"}"),function e(r){var t,n="CROSSJOIN({";r.length>2?(t=r.pop(),n+=e(r)):(n+=r.shift(),t=r.pop());return n+="},{",n+=t,n+="})"}(t)}function i(e,r){var t=e.length-1,n=e[t],a=function(e,r){for(var t=0,n=e.length;t<n;t++)if(0===r.indexOf(e[t].field))return e[t];return null}(r,n);return a&&a.dir?n="ORDER("+n+".Children,"+a.field+".CurrentMember.MEMBER_CAPTION,"+a.dir+")":n+=".Children",e[t]=n,e}function u(e){var r=e.split(".");return r.length>2?r[0]+"."+r[1]:e}Object.defineProperty(r,"__esModule",{value:!0}),r.serializeMembers=function(e,r,t){var n,s="",l=function(e){for(var r,t=[],n=[],a=[],o=0;o<e.length;o++){var i=e[o],s=i.name;if(r=!1,s.length>1)n.push(i);else{for(var l=u(s[0]),c=0,f=a.length;c<f;c++)if(0===a[c].name[0].indexOf(l)){r=!0;break}r||a.push(i),i.expand&&t.push(i)}}return{expanded:t=t.concat(n),root:a}}(e=e||[]),c=l.expanded,f=function(e){var r=[];return e.forEach((function(e){var t=e.name[0],n=u(t);r.some((function(e){return 0===e.indexOf(n)}))||r.push(t)})),r}(l.root),p=[],d=c.length,m=0,v=[];if(f.length>1||r.length>1){for(p.push(o(f,r));m<d;m++)v=a(n=i(c[m].name,t),f),p.push(o(v,r));s+=p.join(",")}else{for(;m<d;m++)n=i(c[m].name,t),v.push(n[0]);s+=f.concat(v).join(",")}return s},r.measureNames=n},function(e,r,t){"use strict";var n=this;Object.defineProperty(r,"__esModule",{value:!0});var a=t(0),o=t(4),i=t(2),u=t(5),s=t(14),l={schemaCatalogs:s.parseCatalogs,schemaCubes:s.parseCubes,schemaDimensions:s.parseDimensions,schemaHierarchies:s.parseHierarchies,schemaKPIs:s.parseKPIs,schemaLevels:s.parseLevels,schemaMeasures:s.parseMeasures,schemaMembers:s.parseMembers};r.fetchData=function(e,r){return a.__awaiter(n,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(u){switch(u.label){case 0:return t=a.__assign({body:o.createRequestBody(r),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,t)];case 1:return[4,u.sent().text()];case 2:return n=u.sent(),[2,i.parseResponse(n)]}}))}))},r.fetchDiscover=function(e,r){return a.__awaiter(n,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(o){switch(o.label){case 0:return t=a.__assign({body:u.createDiscoverBody(r),headers:{"Content-Type":"text/xml"},method:"POST"},e.init),[4,fetch(e.url,t)];case 1:return[4,o.sent().text()];case 2:return n=o.sent(),[2,l[r.command](n)]}}))}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(2);r.parseCubes=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"CUBE_NAME"),caption:n.getPropertyValue(e,"CUBE_CAPTION"),description:n.getPropertyValue(e,"DESCRIPTION"),type:n.getPropertyValue(e,"CUBE_TYPE")}}))},r.parseCatalogs=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"CATALOG_NAME"),description:n.getPropertyValue(e,"DESCRIPTION")}}))},r.parseMeasures=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"MEASURE_NAME"),caption:n.getPropertyValue(e,"MEASURE_CAPTION"),uniqueName:n.getPropertyValue(e,"MEASURE_UNIQUE_NAME"),description:n.getPropertyValue(e,"DESCRIPTION"),aggregator:n.getPropertyValue(e,"MEASURE_AGGREGATOR"),groupName:n.getPropertyValue(e,"MEASUREGROUP_NAME"),displayFolder:n.getPropertyValue(e,"MEASURE_DISPLAY_FOLDER"),defaultFormat:n.getPropertyValue(e,"DEFAULT_FORMAT_STRING")}}))},r.parseKPIs=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"KPI_NAME"),uniqueName:n.getPropertyValue(e,"KPI_NAME"),caption:n.getPropertyValue(e,"KPI_CAPTION"),value:n.getPropertyValue(e,"KPI_VALUE"),goal:n.getPropertyValue(e,"KPI_GOAL"),status:n.getPropertyValue(e,"KPI_STATUS"),trend:n.getPropertyValue(e,"KPI_TREND"),statusGraphic:n.getPropertyValue(e,"KPI_STATUS_GRAPHIC"),trendGraphic:n.getPropertyValue(e,"KPI_TREND_GRAPHIC"),description:n.getPropertyValue(e,"KPI_DESCRIPTION"),groupName:n.getPropertyValue(e,"MEASUREGROUP_NAME"),type:"kpi"}}))},r.parseDimensions=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{caption:n.getPropertyValue(e,"DIMENSION_CAPTION"),defaultHierarchy:n.getPropertyValue(e,"DEFAULT_HIERARCHY"),description:n.getPropertyValue(e,"DESCRIPTION"),name:n.getPropertyValue(e,"DIMENSION_NAME"),type:parseInt(n.getPropertyValue(e,"DIMENSION_TYPE"),10),uniqueName:n.getPropertyValue(e,"DIMENSION_UNIQUE_NAME")}}))},r.parseHierarchies=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"HIERARCHY_NAME"),caption:n.getPropertyValue(e,"HIERARCHY_CAPTION"),description:n.getPropertyValue(e,"DESCRIPTION"),uniqueName:n.getPropertyValue(e,"HIERARCHY_UNIQUE_NAME"),dimensionUniqueName:n.getPropertyValue(e,"DIMENSION_UNIQUE_NAME"),displayFolder:n.getPropertyValue(e,"HIERARCHY_DISPLAY_FOLDER"),origin:n.getPropertyValue(e,"HIERARCHY_ORIGIN"),defaultMember:n.getPropertyValue(e,"DEFAULT_MEMBER")}}))},r.parseLevels=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"LEVEL_NAME"),caption:n.getPropertyValue(e,"LEVEL_CAPTION"),description:n.getPropertyValue(e,"DESCRIPTION"),uniqueName:n.getPropertyValue(e,"LEVEL_UNIQUE_NAME"),dimensionUniqueName:n.getPropertyValue(e,"DIMENSION_UNIQUE_NAME"),displayFolder:n.getPropertyValue(e,"LEVEL_DISPLAY_FOLDER"),orderingProperty:n.getPropertyValue(e,"LEVEL_ORDERING_PROPERTY"),origin:n.getPropertyValue(e,"LEVEL_ORIGIN"),hierarchyUniqueName:n.getPropertyValue(e,"HIERARCHY_UNIQUE_NAME")}}))},r.parseMembers=function(e){var r=(new DOMParser).parseFromString(e,"text/xml");return Array.from(r.querySelectorAll("DiscoverResponse > return > root > row")).map((function(e){return{name:n.getPropertyValue(e,"MEMBER_NAME"),caption:n.getPropertyValue(e,"MEMBER_CAPTION"),uniqueName:n.getPropertyValue(e,"MEMBER_UNIQUE_NAME"),dimensionUniqueName:n.getPropertyValue(e,"DIMENSION_UNIQUE_NAME"),hierarchyUniqueName:n.getPropertyValue(e,"HIERARCHY_UNIQUE_NAME"),levelUniqueName:n.getPropertyValue(e,"LEVEL_UNIQUE_NAME"),childrenCardinality:n.getPropertyValue(e,"CHILDREN_CARDINALITY")}}))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1);r.createDataState=function(e){return{columns:n.reverseColumnsByMeasures(e.columns.tuples),data:e.data,rows:e.rows.tuples}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createAxisDescriptors=function(e){for(var r=[],t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];r.push({name:JSON.parse(a),expand:e[a]})}return r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setSort=function(e,r){void 0===r&&(r=[]),e.sort=r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setFilter=function(e,r){void 0===r&&(r=[]),e.filter=r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);n.__exportStar(t(20),r),n.__exportStar(t(6),r)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=t(0);!function(e){e.toggle="HEADERS_ACTION_TOGGLE",e.expand="HEADERS_ACTION_EXPAND",e.collapse="HEADERS_ACTION_COLLAPSE"}(n=r.HEADERS_ACTION||(r.HEADERS_ACTION={}));var o=function(e,r,t){var n=new Set;return e.children.forEach((function(e){var a=r(e);t&&n.add(String(e.path)),o(e,r,t||a).map((function(e){n.add(e)}))})),Array.from(n.values())};r.headersReducer=function(e,t){switch(t.type){case n.toggle:var i=e.find((function(e){return String(e.name)===String(t.payload)}));return r.headersReducer(e,a.__assign({},t,{type:i&&i.expand?n.collapse:n.expand}));case n.expand:var u=e.find((function(e){return String(e.name)===String(t.payload)}));if(u&&!0===u.expand)return e;if(!u||!1!==u.expand&&void 0!==u.expand){var s=e.slice();return s.push({name:t.payload,expand:!0}),s}return e.map((function(e){return e===u?a.__assign({},u,{expand:!0}):e}));case n.collapse:var l=o(t.tree,(function(e){return!e.total&&String(e.path)===String(t.payload)}));return e.slice().filter((function(e){return!l.some((function(r){return r===String(e.name)}))})).map((function(e){return a.__assign({},e,{expand:Boolean(e.expand)})})).map((function(e){return String(e.name)===String(t.payload)?t.payload.length>1?void 0:{name:t.payload,expand:!1}:e})).filter(Boolean);default:return e}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0);n.__exportStar(t(22),r),n.__exportStar(t(7),r),n.__exportStar(t(8),r),n.__exportStar(t(25),r),n.__exportStar(t(26),r)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sumAggregate={init:function(e){"sum"in e==!1&&(e.sum=0)},merge:function(e,r){r.sum+=e.sum},accumulate:function(e,r){e.sum+=r},result:function(e){return e.sum},format:function(e){return e.toFixed(2)}},r.minAggregate={init:function(e){"min"in e==!1&&(e.min=Number.POSITIVE_INFINITY)},merge:function(e,r){r.min=Math.min(e.min,r.min)},accumulate:function(e,r){e.min=Math.min(r,e.min)},result:function(e){return Number.isFinite(e.min)?e.min:NaN},format:function(e){return e.toFixed(2)}},r.maxAggregate={init:function(e){"max"in e==!1&&(e.max=Number.NEGATIVE_INFINITY)},merge:function(e,r){r.max=Math.max(e.max,r.max)},accumulate:function(e,r){e.max=Math.max(r,e.max)},result:function(e){return Number.isFinite(e.max)?e.max:NaN},format:function(e){return e.toFixed(2)}},r.averageAggregate={init:function(e){"count"in e==!1&&(e.sumA=0,e.count=0)},merge:function(e,r){r.sumA+=e.sumA,r.count+=e.count},accumulate:function(e,r){e.sumA+=r,e.count+=1},result:function(e){return e.sumA/e.count},format:function(e){return e.toFixed(2)}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(24);var a=function(e,r){(Array.isArray(e)?e:e.filters).forEach((function(e){return function e(r,t){"filters"in r?r.filters.map((function(r){return e(r,t)})):t(r)}(e,r)}))};r.initializeFiltering=function(e,r,t){var o=t?Array.isArray(t)?{logic:"and",filters:t}:t:void 0,i=o?n.compileFilter(o):function(){return!0},u=e.concat(r),s=[];a(t||[],(function(e){"field"in e&&e.field&&s.push(e.field)}));var l={hasFilter:!1,predicate:i,filteringAxes:[]};if(s.some((function(e){return"function"==typeof e})))l.filteringAxes=u.slice();else if(s.length>0){var c=Array.from(new Set(s).values()),f=u.filter((function(e){return c.indexOf(e.key)>=0}));l.filteringAxes=f}return l.hasFilter=l.filteringAxes.length>0,l}},function(e,t){e.exports=r},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(3),o=t(8),i=function(e,r,t){e.forEach((function(e,n){if(!t[n]){var o=a.subNode(r,n);i(e,o,t)}}))};r.rootFields=function(e){var r=new Set;return e.forEach((function(e){1!==e.name.length||a.splitKeyValue(e.name[0])[1]||r.add(e.name[0])})),r},r.createTuples=function(e,t,n,o,u){var s=r.rootFields(t),l=[],c=function(e,r){var t={members:[]};return e.forEach((function(e){var n=r.find((function(r){return r.key===e})),a=n?n.caption:"",o={caption:a,children:[],hasChildren:!0,parentName:"",levelNum:0,levelName:a,hierarchy:e,name:a};t.members.push(o)})),t}(s,e);l.push(c);for(var f=function(r){var c=t[r];if(1===c.name.length&&!c.expand&&s.has(c.name[0]))return"continue";var f,p=new Set(s.keys()),d=[],m=[],v=[];c.name.forEach((function(r,t){var s,h=a.splitKeyValue(r),g=h[0],y=h[1];if(f=e.find((function(e){return e.key===g})),y){p.delete(g),m.push(r);var A={children:[],caption:y,hierarchy:g,levelNum:1,levelName:g+" "+g,name:r,parentName:f?f.caption:""};d.push(A)}else if(c.expand&&c.name.length-1===t){p.delete(r),m.push(r);var _=function(e,r,t){for(var n,o=[],u=function(e){return Array.from(e).filter((function(e){return!t[e[0]]}))},s=new Map(e),l=function(e){if(n=s.get(r[e]))s=new Map(n);else if(e<r.length-1&&Array.from(s).some((function(t){return a.splitKeyValue(t[0])[0]===r[e]}))){var l=[];s.forEach((function(e,r){t[r]||l.push.apply(l,u(new Map(e)))})),s=new Map,l.forEach((function(e){if(s.has(e[0])){var r=s.get(e[0]),n=e[1],a=new Map;i(r,a,t),i(n,a,t),s.set(e[0],a)}else s.set(e[0],new Map(e[1]))}))}else 0!==e&&e!==r.length-1||Array.from(s).some((function(t){return a.splitKeyValue(t[0])[0]===r[e]}))&&o.push.apply(o,u(s))},c=0;c<r.length;c++)l(c);return o}(n,m,u),E=o.find((function(e){return e.field===g}));E&&E.dir&&_.sort(function(e,r){return function(t,n){var o=e.dir,i=r.sortValue(a.splitKeyValue(t[0])[1]),u=r.sortValue(a.splitKeyValue(n[0])[1]);return i<u?"asc"===o?-1:1:i>u?"asc"===o?1:-1:0}}(E,f));for(var N=0;N<_.length;N++){var x=_[N][0],O={members:[]};v.push(O);var I=a.splitKeyValue(x)[1];f=e.find((function(e){return e.key===r}));A={caption:I,children:[],levelName:r+" "+r,levelNum:1,parentName:f?f.caption:"",hierarchy:r,name:x};(s=O.members).push.apply(s,d),O.members.push(A)}}else if(c.expand){var M=(f=e.find((function(e){return e.key===r})))?f.caption:"";p.delete(r),m.push(r);A={children:[],caption:M,hierarchy:r,levelName:M,levelNum:0,name:M,parentName:""};d.push(A)}p.forEach((function(r){v.forEach((function(t){var n=(f=e.find((function(e){return e.key===r})))?f.caption:"",a={children:[],hasChildren:!0,caption:n,hierarchy:r,levelName:n,levelNum:0,name:n,parentName:""};t.members.push(a)}))})),l.push.apply(l,v)}))},p=0;p<t.length;p++)f(p);return l};var u=function(e,r){var t={caption:String(r.name),children:[],hasChildren:!1,hierarchy:"[Measures]",levelName:"[Measures].[MeasuresLevel]",levelNum:0,name:"[Measures].["+r.name+"]",parentName:""},a=n.copy(e);return a.members.push(t),a};r.addMultipleMeasures=function(e,r){if(r.length<2)return e;for(var t=e.slice(),a=t.length-1;a>=0;a--){var o=t[a];t[a]=u(t[a],r[0]);for(var i=1;i<r.length;i++){var s=u(o,r[i]);t.splice(a+i,0,s)}}return n.reverseColumnsByMeasures(t)},r.createLocalDataState=function(e){var t,n=e.dataTree,a=e.rowSettings,i=e.columnSettings,u=e.rowAxes,s=e.columnAxes,l=e.measures,c=e.sort,f=e.fields,p=((t={})[f.columnsData]=f.columnsData,t[f.dataField]=f.dataField,t),d=r.addMultipleMeasures(r.createTuples(i,s,n.get(f.columnsData),c,p),l),m=r.createTuples(a,u,n,c,p);return{columns:d,data:o.readData(n,m,d,f,i,a,l),rows:m}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createFlatSchemaDimensions=function(e,r){var t=Object.keys(e).map((function(e){return{caption:e,defaultHierarchy:e,description:"",name:e,uniqueName:e,hierarchyUniqueName:e,measure:!0,type:1}}));return r.length&&t.push({caption:"Measures",children:r.map((function(e){return{aggregator:"1",caption:String(e.name),defaultFormat:"",description:"",displayFolder:"",groupName:String(e.name),name:String(e.name),uniqueName:String(e.name)}})),type:2,description:"",name:"Measures",uniqueName:"[Measures]"}),t}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(28);r.PivotGridNavigation=n.PivotGridNavigation;var a=t(29);r.ConfiguratorNavigation=a.ConfiguratorNavigation},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),a=t(9),o=".k-pivotgrid .k-pivotgrid-values",i=".k-pivotgrid .k-pivotgrid-column-headers",u=".k-pivotgrid .k-pivotgrid-row-headers",s=".k-pivotgrid > .k-pivotgrid-empty-cell",l="table.k-pivotgrid-table",c=".k-pivotgrid-cell",f=[o,i,u].join(","),p=[s,[i,l,c].join(" "),[u,l,c].join(" "),[o,l,c].join(" ")],d=function(e,r,t){var n=e.querySelector(".k-icon");if(n){var a=r.elements.indexOf(e);r.update=function(){r.focusElement(r.elements[a],null),r.update=function(){}},n.click(),t.preventDefault()}},m=function(e,r,t){e.offsetLeft<r.scrollLeft&&(t.scrollLeft=e.offsetLeft)},v=function(e,r,t){e.offsetLeft+e.offsetWidth>r.scrollLeft+r.offsetWidth&&e.offsetWidth<r.offsetWidth&&(t.scrollLeft=e.offsetLeft+e.offsetWidth-r.offsetWidth)},h=function(e,r,t){r.scrollTop&&e.offsetTop<r.scrollTop&&(t.scrollTop=e.offsetTop)},g=function(e,r,t){e.offsetTop+e.offsetHeight>r.scrollTop+r.offsetHeight&&e.offsetHeight<r.offsetHeight&&(t.scrollTop=e.offsetTop+e.offsetHeight-r.offsetHeight)},y=function(e,r,t){var n=r.querySelector(o),a=e&&e.closest(f);n&&a&&e&&t.forEach((function(r){return r(e,a,n)}))},A=function(e){var r=Array.from(e.rows),t=Array.from(r&&r[0]&&r[0].cells||[]).map((function(e){return e.colSpan})).reduce((function(e,r){return e+r}),0),n=r.map((function(){return new Array(t)}));return r.forEach((function(e,r){var t=0;Array.from(e.cells).forEach((function(e){for(var a=0;a<e.colSpan;a++){for(var o=0;o<e.rowSpan;o++){var i=n[r+o].findIndex((function(e,r){return r>=t&&!e}));n[r+o][i]=e}t++}}))})),n},_=function(e){for(var r=A(e.querySelector([i,l].join(" "))),t=A(e.querySelector([u,l].join(" "))),n=A(e.querySelector([o,l].join(" "))),a=e.querySelector(s),c=new Array(t[0].length).fill(a),f=[],p=0;p<r.length;p++)f.push(c.concat(r[p]));for(p=0;p<t.length;p++)f.push(t[p].concat(n[p]));return f},E=function(e){return e.ctrlKey||e.metaKey},N=function(e,r,t){for(var n=_(e),a=function(e,r){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)if(e[t][n]===r)return[t,n];return[-1,-1]}(n,r),o=[a[0]+t[0],a[1]+t[1]],i=n[o[0]]&&n[o[0]][o[1]];i&&i===r;)i=n[(o=[o[0]+t[0],o[1]+t[1]])[0]]&&n[o[0]][o[1]];return i},x={keydown:{ArrowLeft:function(e,r,t){t.preventDefault();var n=N(r.root,e,[0,-1]);r.focusElement(n,e),y(n,r.root,[v,m,g,h])},ArrowRight:function(e,r,t){t.preventDefault();var n=N(r.root,e,[0,1]);r.focusElement(n,e),y(n,r.root,[m,v,g,h])},ArrowUp:function(e,r,t){t.preventDefault();var n=N(r.root,e,[-1,0]);r.focusElement(n,e),y(n,r.root,[v,m,g,h])},ArrowDown:function(e,r,t){t.preventDefault();var n=N(r.root,e,[1,0]);r.focusElement(n,e),y(n,r.root,[v,m,h,g])},o:function(e,r,t){if(r.root){var n=r.root.nextElementSibling;n&&n instanceof HTMLElement&&n.matches("div.k-pivotgrid-configurator-button")&&(n.click(),setTimeout((function(){if(r.root.parentNode){var e=r.root.parentNode.querySelector(".k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview");e instanceof HTMLElement&&(e.setAttribute("tabindex",String(r.tabIndex)),e.focus())}}),0))}},Enter:d,Space:d,Home:function(e,r,t){var n=_(r.root),a=(E(t)?n[0]:n.find((function(r){return Boolean(r.find((function(r){return r===e})))}))||[])[0];a&&(r.focusElement(a,e),y(a,r.root,[v,m,g,h]),t.preventDefault())},End:function(e,r,t){var n=_(r.root),a=E(t)?n[n.length-1]:n.find((function(r){return Boolean(r.find((function(r){return r===e})))}))||[],o=a&&a[a.length-1]||null;o&&(r.focusElement(o,e),y(o,r.root,[m,v,h,g]),t.preventDefault())}}},O={click:function(e,r){if(e&&e instanceof HTMLElement){var t=r.elements.find((function(e){return e.hasAttribute("tabindex")}))||null;r.focusElement(e,t)}}},I=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.selectors=p,r.mouseEvents=O,r.keyboardEvents=x,r}return n.__extends(r,e),r}(a.Navigation);r.PivotGridNavigation=I},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(0),a=t(9),o=[".k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview",".k-pivotgrid-configurator-content .k-chip",".k-pivotgrid-configurator-actions button"],i=function(e,r,t,n){t.preventDefault();var a=r.elements,o=a.indexOf(e)+n;o<0&&(o=a.length-1),r.focusElement(a[o%a.length],e)},u=function(e,r,t){t.target instanceof HTMLElement&&(t.target.querySelector(".k-icon.k-i-x-circle")instanceof HTMLElement&&(t.preventDefault(),i(e,r,t,-1)))},s={keydown:{Tab:function(e,r,t){i(e,r,t,t.shiftKey?-1:1)},Escape:function(e,r,t){if(t.target instanceof HTMLElement&&r.root){var n=r.root.previousElementSibling,a=r.root.nextElementSibling,o=Array.from(n instanceof HTMLElement?n.querySelectorAll("[tabindex]"):[]).find((function(e){return e.tabIndex>=0}));o instanceof HTMLElement&&(o.focus(),a instanceof HTMLElement&&a.click())}},Delete:u,Backspace:u}},l={click:function(e,r){if(e&&e instanceof HTMLElement){var t=r.elements.find((function(e){return e.hasAttribute("tabindex")}))||null;r.focusElement(e,t)}}},c=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.selectors=o,r.mouseEvents=l,r.keyboardEvents=s,r}return n.__extends(r,e),r}(a.Navigation);r.ConfiguratorNavigation=c}])}));