"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TableEditNS = void 0;
var kendo_editor_common_1 = require("@progress/kendo-editor-common");
var proseMirrorTool_1 = require("./proseMirrorTool");
/**
 * @hidden
 */
var deleteColumnCmd = function (state, dispatch) {
    var result = (0, kendo_editor_common_1.deleteColumn)(state, dispatch);
    if (result && !dispatch) {
        var pos = (0, kendo_editor_common_1.selectionCell)(state);
        var row = pos && pos.node(pos.depth);
        if (row && row.content.childCount === 1) {
            return false;
        }
    }
    return result;
};
/**
 * @hidden
 */
var deleteRowCmd = function (state, dispatch) {
    var result = (0, kendo_editor_common_1.deleteRow)(state, dispatch);
    if (result && !dispatch) {
        var pos = (0, kendo_editor_common_1.selectionCell)(state);
        var rowParent = pos && pos.node(pos.depth - 1);
        if (rowParent && rowParent.content.childCount === 1) {
            return false;
        }
    }
    return result;
};
/**
 * @hidden
 */
var TableEditNS;
(function (TableEditNS) {
    /**
     * @hidden
     */
    TableEditNS.createAddRowBeforeTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.addRowBefore);
    };
    /**
     * @hidden
     */
    TableEditNS.createAddRowAfterTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.addRowAfter);
    };
    /**
     * @hidden
     */
    TableEditNS.createAddColumnBeforeTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.addColumnBefore);
    };
    /**
     * @hidden
     */
    TableEditNS.createAddColumnAfterTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.addColumnAfter);
    };
    /**
     * @hidden
     */
    TableEditNS.createDeleteRowTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, deleteRowCmd);
    };
    /**
     * @hidden
     */
    TableEditNS.createDeleteColumnTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, deleteColumnCmd);
    };
    /**
     * @hidden
     */
    TableEditNS.createDeleteTableTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.deleteTable);
    };
    /**
     * @hidden
     */
    TableEditNS.createMergeCellsTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.mergeCells);
    };
    /**
     * @hidden
     */
    TableEditNS.createSplitCellTool = function (settings) {
        return (0, proseMirrorTool_1.createProseMirrorTool)(settings, kendo_editor_common_1.splitCell);
    };
})(TableEditNS = exports.TableEditNS || (exports.TableEditNS = {}));
