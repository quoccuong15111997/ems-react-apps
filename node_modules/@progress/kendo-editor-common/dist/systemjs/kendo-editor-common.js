System.register("@progress/kendo-editor-common",["prosemirror-dropcursor","prosemirror-gapcursor","prosemirror-history","prosemirror-commands","prosemirror-inputrules","prosemirror-model","tslib","prosemirror-keymap","prosemirror-transform","prosemirror-view","prosemirror-schema-list","prosemirror-state","prosemirror-tables"],function(N){var i,a,s,l,u,c,d,f,p,g,m,y,h;function t(e){return e.__useDefault?e.default:e}return{setters:[function(e){i=t(e)},function(e){a=t(e)},function(e){s=t(e)},function(e){l=t(e)},function(e){u=t(e)},function(e){c=t(e)},function(e){d=t(e)},function(e){f=t(e)},function(e){p=t(e)},function(e){g=t(e)},function(e){m=t(e)},function(e){y=t(e)},function(e){h=t(e)}],execute:function(){function r(e){var t;return(o[e]||(t=o[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var n,o;n=[function(e,t){e.exports=y},function(e,t){e.exports=d},function(e,t){e.exports=g},function(e,l,t){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.expandToWordWrap=l.expandSelection=l.shallowEqual=l.indentHtml=l.selectedLineTextOnly=l.getNodeFromSelection=l.getSelectionText=l.hasSameMarkup=l.insertNode=l.findNthParentNodeOfType=l.canInsert=l.changeStylesString=void 0;function s(e){return(e instanceof o.Node?e.type:e).name}var o=t(5),g=t(0),i=t(16),m=(l.changeStylesString=function(e,t){var n,r=t.style,o=t.value,t=t.newValue;return e?(n=(e=e.split(/\s*;\s*/).filter(function(e){return Boolean(e)})).filter(function(e){e=e.split(/\s*:\s*/);return!(e[0].toLowerCase()===r&&o.test(e[1]))}),t&&n.push(r+": "+t),{style:n.join("; ")+(n.length?";":""),changed:Boolean(t)||n.length!==e.length}):{changed:!1,style:null}},l.canInsert=function(e,t){for(var n=e.selection.$from,r=n.depth;0<=r;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1},l.findNthParentNodeOfType=function(i,a){return void 0===a&&(a=1),function(e){t=void 0===a?1:a;for(var t,n=e.$from,r=n.depth;0<r;r--){var o=n.node(r);if(s(o)===s(i)&&0==--t)return{depth:r,node:o}}}},l.insertNode=function(n,r){return function(e,t){e=e.tr.replaceSelectionWith(n);r&&e.scrollIntoView(),t(e)}},l.hasSameMarkup=function(e,t,n,r){e=o.Fragment.from(i.parseContent(e,n,r)),t=o.Fragment.from(i.parseContent(t,n,r));return e.eq(t)},l.getSelectionText=function(e){var e=e.selection;return e instanceof g.TextSelection||e instanceof g.AllSelection?(e=e.content().content).textBetween(0,e.size):""},l.getNodeFromSelection=function(e){if(e.selection instanceof g.NodeSelection)return e.selection.node},l.selectedLineTextOnly=function(e){var t="",n=!1,r=e.selection,o=e.doc,i=r.$from,a=r.$to,s=r.from,r=r.to;return i.sameParent(a)&&(o.nodesBetween(s,r,function(e){n=n||e.isLeaf&&!e.isText}),n||(t=l.getSelectionText(e))),t},l.indentHtml=function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},l.shallowEqual=function(t,n){var e=Object.keys(t),r=Object.keys(n);return e.length===r.length&&e.every(function(e){return t[e]===n[e]})},{before:/[^ !,?.\[\]{}()]+$/i,after:/^[^ !,?.\[\]{}()]+/i});l.expandSelection=function(e,t,n){if(n.applyToWord&&e.selection.empty){var r,n=!0===n.applyToWord?m:n.applyToWord,o=e.tr,i=e.selection,a=i.$head.nodeBefore,s=i.$head.nodeAfter;if(a&&"text"===a.type.name&&a.text&&s&&"text"===s.type.name&&s.text){var l=[];i.$head.parent.descendants(function(e,t){return l.push({node:e,pos:t}),!1});for(var u=i.$head.parentOffset,a=l.findIndex(function(e){var t=e.node,e=e.pos;return e<=u&&e+t.nodeSize>=u}),c=l[a].node.text,d=!1,f=a-1;0<=f;f--){var p=l[f];!d&&p&&"text"===p.node.type.name?c=p.node.text+c:(d=!0,u-=p.node.nodeSize)}for(f=a+1;f<l.length&&(p=l[f])&&"text"===p.node.type.name;f++)c+=p.node.text;var s=c.substring(0,u),a=c.substring(u),s=n.before.exec(s),n=n.after.exec(a);if(s&&n)return a=s[0].length,s=n[0].length,r=i.from,o.setSelection(g.TextSelection.create(e.doc,r-a,r+s)),{state:{tr:o,selection:o.selection,doc:o.doc,storedMarks:null,schema:o.doc.type.schema},dispatch:function(e){e.setSelection(g.TextSelection.create(e.doc,r)),t(e)}}}}return{state:e,dispatch:t}},l.expandToWordWrap=function(r,o){return function(e,t,n){e=l.expandSelection(e,t,o),t=e.state,e=e.dispatch;return r(o)(t,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataResizeDirImage=t.dataResizeDirTable=t.resizeHandle=t.resizableWrap=t.resizableAttr=t.colgroupAttr=t.rowTypeAttr=void 0,t.rowTypeAttr="k-parent-node",t.colgroupAttr="k-colgroup-data",t.resizableAttr="k-resizable-node",t.resizableWrap="k-editor-resize-wrap-element",t.resizeHandle="k-editor-resize-handle",t.dataResizeDirTable="data-dir-table-resize",t.dataResizeDirImage="data-dir-image-resize"},function(e,t){e.exports=c},function(e,t){e.exports=h},function(e,m,t){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.getActiveMarks=m.getMark=m.selectionMarks=m.styleValue=m.hasMark=m.cleanMarks=m.removeAllMarks=m.removeMarks=m.removeMark=m.toggleMark=m.markApplies=void 0;var n=t(8),y=t(5);m.markApplies=function(r,o,i){for(var e=0;e<o.length;e++){var t=function(e){var e=o[e],t=e.$from,e=e.$to,n=0===t.depth&&r.type.allowsMarkType(i);if(r.nodesBetween(t.pos,e.pos,function(e){if(n)return!1;n=e.inlineContent&&e.type.allowsMarkType(i)}),n)return{v:!0}}(e);if(t)return t.v}return!1},m.toggleMark=function(f,p,g){return function(e,t){var n=e.selection,r=n.empty,o=n.$cursor,i=n.ranges;if(r&&!o||!m.markApplies(e.doc,i,f))return!1;if(t)if(o)f.isInSet(e.storedMarks||o.marks())?t(g.removeStoredMark(f)):t(g.addStoredMark(f.create(p)));else{for(var a=!1,s=0;!a&&s<i.length;s++)var l=i[s],u=l.$from,c=l.$to,a=e.doc.rangeHasMark(u.pos,c.pos,f);for(s=0;s<i.length;s++){var d=i[s],u=d.$from,c=d.$to;a?g.removeMark(u.pos,c.pos,f):g.addMark(u.pos,c.pos,f.create(p))}t(g.scrollIntoView())}return!0}},m.removeMark=function(t,c,d,f){void 0===f&&(f=null);var p=[],g=0;return t.doc.nodesBetween(c,d,function(e,t){if(e.isInline){g++;var n,r=null;if(f instanceof y.MarkType?(n=f.isInSet(e.marks))&&(r=[n]):f?f.isInSet(e.marks)&&(r=[f]):r=e.marks,r&&r.length)for(var o=Math.min(t+e.nodeSize,d),i=0;i<r.length;i++){for(var a=r[i],s=void 0,l=0;l<p.length;l++){var u=p[l];u.step===g-1&&a.eq(u.style)&&(s=u)}s?(s.to=o,s.step=g):p.push({style:a,from:Math.max(t,c),to:o,step:g})}}}),p.forEach(function(e){return t.step(new n.RemoveMarkStep(e.from,e.to,e.style))}),t},m.removeMarks=function(r,t,n,o){var e=t.selection,i=e.$cursor,a=e.ranges;if(o=o||t.tr,i)r.forEach(function(e){e.isInSet(t.storedMarks||i.marks())&&n(o.removeStoredMark(e))});else{for(var s=0;s<a.length;s++)!function(e){var e=a[e],t=e.$from,n=e.$to;r.forEach(function(e){m.removeMark(o,t.pos,n.pos,e)})}(s);n(o.scrollIntoView())}return!0},m.removeAllMarks=function(e){var e=(void 0===e?{}:e).except,r=void 0===e?[]:e;return function(e,t){var n,e=e.tr;m.cleanMarks(e,{except:(n=r)instanceof Array?n:[n]}),e.docChanged&&t(e)}},m.cleanMarks=function(r,e){var o,e=e.except,t=r.doc,n=r.selection,i=t.type.schema,t=n.empty,n=n.ranges,a=(e||[]).map(function(e){return e.name});t||(o=Object.keys(i.marks).map(function(e){return i.marks[e]}).filter(function(e){return-1===a.indexOf(e.name)}),n.forEach(function(e){var t=e.$from,n=e.$to;o.forEach(function(e){return r.removeMark(t.pos,n.pos,e)})}))},m.hasMark=function(e,t){var n,r=e.schema.marks,o=(t.altMarks||[]).filter(function(e){return r[e]}),i=t.altStyle,a=e.selection,s=a.from,l=a.$from,u=a.to,a=a.empty,t=r[t.mark],c=e.doc,d=!1;return!(d=a?(n=e.storedMarks||l.marks(),t&&t.isInSet(n)||o.some(function(e){return r[e].isInSet(n)})):t&&c.rangeHasMark(s,u,t)||o.some(function(e){return c.rangeHasMark(s,u,r[e])}))&&i&&r.style?m.selectionMarks(e,r.style).some(function(e){return null!==m.styleValue(e,i)}):Boolean(d)},m.styleValue=function(e,t){for(var n=(e&&e.attrs.style||"").split(/\s*;\s*/).filter(function(e){return Boolean(e)}),r=0;r<n.length;r++){var o=n[r].split(/\s*:\s*/);if(o[0].toLowerCase()===t.name&&t.value.test(o[1]))return o[1]}return null},m.selectionMarks=function(e,t){var n=e.selection,r=n.from,o=n.$from,i=n.to,a=[];return n.empty?a.push(t.isInSet(e.storedMarks||o.marks())):e.doc.nodesBetween(r,i,function(e){e.isInline&&a.push(t.isInSet(e.marks))}),a},m.getMark=function(e,t){e=m.selectionMarks(e,t),t=e.filter(function(e){return Boolean(e)});return e.length===t.length?e[0]:void 0},m.getActiveMarks=function(e,t){e=m.selectionMarks(e,t),t=e.filter(function(e){return Boolean(e)});return{hasNodesWithoutMarks:e.length!==t.length,marks:t}}},function(e,t){e.exports=p},function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.edgeCell=o.parentNode=o.cellIndexes=o.domCellAround=o.getTable=o.otherResizeHandle=o.otherResizing=o.tableRowResizeKey=o.tableColumnResizeKey=o.tableResizeKey=o.setNodeStyle=o.parseStyle=o.reAnyValue=void 0;var i=t(1),n=t(0),r=t(6),a=t(3);function s(e,t){for(var n=e.depth;0<n;n--){var r=e.node(n);if(t(r))return{node:r,depth:n}}return null}o.reAnyValue=/^.+$/,o.parseStyle=function(e){return(e||"").split(/\s*;\s*/).filter(Boolean).map(function(e){var t,e=e.split(/\s*:\s*/);return(t={})[e[0]]=e[1],t}).reduce(function(e,t){return i.__assign(i.__assign({},e),t)},{})},o.setNodeStyle=function(e,t,n){var r;return new RegExp("[^-]?"+t+":").test(e.style||"")?(r=a.changeStylesString(e.style||"",{style:t,value:o.reAnyValue,newValue:n}).style,i.__assign(i.__assign({},e),{style:r})):e.style?i.__assign(i.__assign({},e),{style:e.style.replace(/;$/,"")+"; "+t+": "+n+";"}):i.__assign(i.__assign({},e),{style:t+": "+n+";"})},o.tableResizeKey=new n.PluginKey("table-resize"),o.tableColumnResizeKey=new n.PluginKey("table-column-resizing"),o.tableRowResizeKey=new n.PluginKey("table-row-resizing"),o.otherResizing=function(e,t){return e!==o.tableResizeKey&&Boolean(o.tableResizeKey.get(t))&&o.tableResizeKey.getState(t).dragging||e!==o.tableColumnResizeKey&&Boolean(o.tableColumnResizeKey.get(t))&&o.tableColumnResizeKey.getState(t).dragging||e!==o.tableRowResizeKey&&Boolean(o.tableRowResizeKey.get(t))&&o.tableRowResizeKey.getState(t).dragging},o.otherResizeHandle=function(e,t){return e!==o.tableColumnResizeKey&&Boolean(o.tableColumnResizeKey.get(t))&&-1<o.tableColumnResizeKey.getState(t).activeHandle||e!==o.tableRowResizeKey&&Boolean(o.tableRowResizeKey.get(t))&&-1<o.tableRowResizeKey.getState(t).activeHandle},o.getTable=function(e){return e&&e.firstChild&&"TABLE"===e.firstChild.nodeName?e.firstChild:e},o.domCellAround=function(e){for(;e&&"TD"!==e.nodeName&&"TH"!==e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e},o.cellIndexes=function(r){e=r.closest("table"),e=Array.from(e&&e.rows||[]),t=Array.from(e&&e[0]&&e[0].cells||[]).map(function(e){return e.colSpan}).reduce(function(e,t){return e+t},0),a=e.map(function(){return new Array(t)}),e.forEach(function(e,o){var i=0;Array.from(e.cells).forEach(function(e){for(var t=0;t<e.colSpan;t++){for(var n=0;n<e.rowSpan;n++){var r=a[o+n].findIndex(function(e,t){return i<=t&&!e});a[o+n][r]=e}i++}})});for(var e,t,a,o=a,i=null,n=0;n<o.length&&"break"!==function(n){if(o[n].forEach(function(e,t){r===e&&(i={rowIndex:n,cellIndex:t})}),i)return"break"}(n);n++);return i||{rowIndex:-1,cellIndex:-1}},o.parentNode=s,o.edgeCell=function(e,t,n){var t=e.posAtCoords({left:t.clientX,top:t.clientY});return!t||null===(t=s(e=e.state.doc.resolve(t.pos),function(e){return"table"===e.type.spec.tableRole}))?-1:(e=e.start(t.depth),t=t.node,e+(e=r.TableMap.get(t)).map[e.width*n.rowIndex+n.cellIndex])}},function(e,t){e.exports=l},function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.activeNode=s.parentBlockFormat=s.hasNode=s.addStyles=s.getBlockFormats=s.cleanTextBlockFormatting=s.formatBlockElements=s.blockNodes=s.changeTextBlock=void 0;var l=t(1),o=t(3),u=t(8),c=t(5),i=t(0);s.changeTextBlock=function(i,a,s,l){if(!s.isTextblock)return!1;i.selection.ranges.forEach(function(e){var o=i.steps.length,t=e.$from.pos,e=e.$to.pos;i.doc.nodesBetween(t,e,function(e,t){var n,r;if(e.eq(a)&&e.isTextblock&&!e.hasMarkup(s,l)&&function(e,t,n){e=e.resolve(t),t=e.index();return e.parent.canReplaceWith(t,t+1,n)}(i.doc,i.mapping.slice(o).map(t),s))return i.clearIncompatible(i.mapping.slice(o).map(t,1),s),n=(r=i.mapping.slice(o)).map(t,1),r=r.map(t+e.nodeSize,1),t=new c.Slice(c.Fragment.from(s.create(l,null,e.marks)),0,0),i.step(new u.ReplaceAroundStep(n,r,n+1,r-1,t,1,!0)),!1})})},s.blockNodes=function(e,t){var n=e.doc,e=e.selection,r=e.$from,o=e.ranges,a=(t=void 0===t?{blocksInSelection:!1}:t).blocksInSelection,s=[],t=e instanceof i.NodeSelection?e.node:void 0;return t?t.isBlock?(s.push(t),t.nodesBetween(0,t.content.size,function(e){e.isBlock&&s.push(e)})):!a&&r.parent&&r.parent.isBlock&&s.push(r.parent):o.forEach(function(e){var o=e.$from.pos,i=e.$to.pos;n.nodesBetween(o,i,function(e,t,n,r){e.isBlock&&(!a||o<=t&&t+e.content.size+2<=i)&&s.push(e)})}),s},s.formatBlockElements=function(a,r){return function(e,t){var n=s.blockNodes(e),o=e.schema.nodes,i=e.tr,e=(i.setMeta("commandName",r),i.setMeta("args",{value:a}),n.forEach(function(e){var t,n,r;e.type.isTextblock&&("p"===a?(n=(r=e.attrs).level,r=l.__rest(r,["level"]),s.changeTextBlock(i,e,o.paragraph,r)):/^h[1-6]$/i.test(a)?(n=parseInt(a.substr(1),10),s.changeTextBlock(i,e,o.heading,l.__assign(l.__assign({},e.attrs),{level:n}))):"blockquote"===a&&(n=(t=e.attrs).level,r=l.__rest(t,["level"]),s.changeTextBlock(i,e,o.blockquote,r)))}),i.docChanged);return e&&t(i.scrollIntoView()),e}},s.cleanTextBlockFormatting=function(i,e){var t=i.doc,n=i.selection,r=(e=void 0===e?{blocksInSelection:!0}:e).blocksInSelection,a=e.blockNodeType;s.blockNodes({doc:t,selection:n},{blocksInSelection:r}).filter(function(e){return e.isTextblock}).forEach(function(e){var t=e.attrs||{},n=t.style,n=void 0===n?"":n,r=t.class,r=void 0===r?"":r,t=l.__rest(t,["style","class"]),o=a||e.type;(n||r||o!==e.type)&&s.changeTextBlock(i,e,o,t)})},s.getBlockFormats=function(e){var t=s.blockNodes(e),n=e.schema.nodes,r=[];return t.forEach(function(e){e.type===n.paragraph?r.push("p"):e.type===n.heading?r.push("h"+e.attrs.level):e.type===n.blockquote&&n.blockquote.isTextblock&&r.push("blockquote")}),r},s.addStyles=function(e,t){var n,r=e.attrs.style;return r&&t.forEach(function(e){n={style:e.name,value:/^.+$/,newValue:e.value},n=o.changeStylesString(r,n),r=n.changed?n.style:r}),r=r||t.reduce(function(e,t){return(e&&t.value?e+" ":"")+t.value?t.name+": "+t.value+";":""},""),Object.assign({},e.attrs,{style:r||null})},s.hasNode=function(e,t){var n=e.selection,r=n.from,n=n.to,o=!1;return e.doc.nodesBetween(r,n,function(e){return!(o=o||e.type===t)}),o},s.parentBlockFormat=function(e){e=s.getBlockFormats(e);return 1===new Set(e).size?e[0]:null},s.activeNode=function(e){return{tag:s.parentBlockFormat(e)||""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handles=t.directions=void 0,t.directions={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},t.handles=Object.keys(t.directions)},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.marks=i.nodes=i.parseStrColgroup=void 0;function a(e){for(var t,n={},r=e.attributes,o=0;o<r.length;o++)n[(t=r[o]).name]=t.value;return n}function n(e){var t={};return e.forEach(function(e){t[e]={default:null}}),t}function r(){return n(["style","class","id"])}function s(e,t){for(var n in e)if(n&&null!==e[n]&&n!==t)return 1}function l(e,n){void 0===n&&(n=[]);var t,r={};for(t in e)!function(t){t&&null!==e[t]&&!n.find(function(e){return e===t})&&(r[t]=e[t])}(t);return r}function o(e){var t;return(t={})[e]={name:e,inclusive:!0,parseDOM:[{tag:e}],toDOM:function(){return[e,0]}},t}function u(n){var e;return(e={})[n]={default:null,getFromDOM:function(e){return e.getAttribute(n)},setDOMAttr:function(e,t){t[n]=e}},e}var c=t(1),d=t(5),f=t(6),p=t(16),g=t(4),m=["blockquote",0],y=["hr"],h=["pre",["code",0]],b=["ol",0],v=["ul",0],k=["li",0],t=c.__assign(c.__assign(c.__assign(c.__assign(c.__assign(c.__assign(c.__assign(c.__assign(c.__assign(c.__assign({link:{attrs:c.__assign(c.__assign({},r()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:a}],toDOM:function(e){return["a",l(e.attrs),0]}}},o("strong")),o("b")),o("em")),o("i")),o("u")),o("del")),o("sub")),o("sup")),o("code")),{style:{attrs:c.__assign({},r()),parseDOM:[{tag:"span",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["span",l(e.attrs),0]:["span",0]}}}),t=(i.marks=t,c.__assign(c.__assign(c.__assign(c.__assign({},u("style")),u("class")),u("id")),u("headers"))),w={doc:{content:"colgroup*"},col:{attrs:n(["id","class","style","span"]),parseDOM:[{getAttrs:a,tag:"col"}],toDOM:function(e){return["col",e.attrs]}},colgroup:{attrs:n(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:a,tag:"colgroup"}],toDOM:function(e){return["colgroup",e.attrs,0]}},text:{inline:!0,group:"inline"}},_=new d.Schema({nodes:w,marks:{}}),d=(i.parseStrColgroup=function(e){e=p.domToPmDoc(p.htmlToFragment(e),_,{preserveWhitespace:!1});return p.pmDocToFragment(e).firstChild},f.tableNodes({tableGroup:"block",cellContent:"block+",cellAttributes:t})),w=(d.table_row.attrs=c.__assign(c.__assign({},d.table_row.attrs),n([g.rowTypeAttr,"style","class","id"])),d.table_row.toDOM=function(e){return["tr",l(e.attrs),0]},d.table_row.parseDOM=[{tag:"tr",getAttrs:a}],d.table.attrs=c.__assign(c.__assign({},d.table.attrs),n(["style","class","id",g.colgroupAttr,g.resizableAttr])),d.table.toDOM=function(r){var e,t,n=s(r.attrs)?l(r.attrs,[g.colgroupAttr,g.resizableAttr]):{},o=null;return r.attrs[g.colgroupAttr]&&!function(){for(var e=!1,t=r.child(0),n=0;n<t.childCount;n++)if(t.child(n).attrs.colwidth){e=!0;break}return e}()&&(e=i.parseStrColgroup(r.attrs[g.colgroupAttr]))&&(t=Array.from(e.children).map(function(e){return["col",a(e)]}),o=["colgroup",a(e)].concat(t)),o?["table",n,o,["tbody",0]]:["table",n,["tbody",0]]},d.table.parseDOM=[{tag:"table",getAttrs:function(e){var t=a(e),e=Array.from(e.childNodes).find(function(e){return"COLGROUP"===e.nodeName});return e&&(t[g.colgroupAttr]=e.outerHTML),t}}],c.__assign({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:c.__assign({},r()),parseDOM:[{tag:"p",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["p",l(e.attrs),0]:["p",0]}},div:{content:"block*",group:"block",attrs:c.__assign({},r()),parseDOM:[{tag:"div",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["div",l(e.attrs),0]:["div",0]}},blockquote:{attrs:c.__assign({},r()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["blockquote",l(e.attrs),0]:m}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return y}},heading:{attrs:c.__assign(c.__assign({},r()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{level:1})}},{tag:"h2",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{level:2})}},{tag:"h3",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{level:3})}},{tag:"h4",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{level:4})}},{tag:"h5",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{level:5})}},{tag:"h6",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{level:6})}}],toDOM:function(e){return s(e.attrs,"level")?["h"+e.attrs.level,l(e.attrs,["level"]),0]:["h"+e.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return h}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:c.__assign({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},r()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["img",l(e.attrs)]:["img"]}},hard_break:{inline:!0,attrs:c.__assign({},r()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["br",l(e.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:c.__assign(c.__assign({},r()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(e){return c.__assign(c.__assign({},a(e)),{order:e.hasAttribute("start")?parseInt(e.getAttribute("start")||"1",10):1})}}],toDOM:function(e){return 1===e.attrs.order?s(e.attrs,"order")?["ol",l(e.attrs,["order"]),0]:b:["ol",c.__assign(c.__assign({},l(e.attrs,["order"])),{start:e.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:c.__assign({},r()),parseDOM:[{tag:"ul",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["ul",l(e.attrs),0]:v}},list_item:{content:"(paragraph | heading) block*",attrs:c.__assign({},r()),parseDOM:[{tag:"li",getAttrs:a}],toDOM:function(e){return s(e.attrs)?["li",l(e.attrs),0]:k},defining:!0}},d));i.nodes=w},function(e,t){e.exports=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyInlineStyle=t.toggleInlineFormat=t.getInlineStyles=void 0;function p(p,g){return function(e,t,n){var r=e.selection,o=r.empty,i=r.$cursor,a=r.ranges;if(o&&!i||!y.markApplies(e.doc,a,p))return!1;var s=!1;if(t){var l=n||e.tr;if(i){r=e.storedMarks||i.marks();if(p.isInSet(r)){var o=k(r,g),n=r.find(function(e){return"style"===e.type.name}),u=b.__assign(b.__assign({},n?n.attrs:{}),{style:o.style||null});if(m.shallowEqual(n.attrs,u))return!1;t(l.removeStoredMark(p)),Object.keys(u).some(function(e){return null!==u[e]})&&t(l.addStoredMark(p.create(u))),s=!0}}else{for(var c=0;c<a.length;c++)var d=a[c],f=d.$from,d=d.$to,s=function(t,u,c,d,f){var p=f.create({style:d.style}),g=[],m=[],y=null,h=null;return t.doc.nodesBetween(u,c,function(e,t,n){if(e.isInline){var r=e.marks;if(!p.isInSet(r)&&n.type.allowsMarkType(p.type)){var o=Math.max(t,u),i=Math.min(t+e.nodeSize,c),n=k(r,d);if(n.changed||d.newValue){for(var t=n.changed?{style:n.style||null}:{style:[d.style]+": "+d.newValue+";"},e=f.isInSet(r)?r.find(function(e){return"style"===e.type.name}):null,a=e?b.__assign(b.__assign({},e.attrs),t):t,n=f.create(a),s=n.addToSet(r),l=0;l<r.length;l++)r[l].isInSet(s)||(y&&y.to===o&&y.mark.eq(r[l])?y.to=i:(y=new v.RemoveMarkStep(o,i,r[l]),g.push(y)));e=h&&h.to===o,t=e&&n.attrs.style===h.mark.attrs.style;e&&t?h.to=i:Object.keys(a).some(function(e){return null!==a[e]})&&(h=new v.AddMarkStep(o,i,n),m.push(h))}}}}),g.forEach(function(e){return t.step(e)}),m.forEach(function(e){return t.step(e)}),0<g.length+m.length}(l,f.pos,d.pos,g,p);s&&(l.scrollIntoView(),t(l))}}return s}}var b=n(1),v=n(8),m=n(3),y=n(7),k=function(e,t){e=e.find(function(e){return"style"===e.type.name}),e=e&&e.attrs.style;return m.changeStylesString(e,t)};t.getInlineStyles=function(e,t){var n=e.schema.marks.style;return(n?y.selectionMarks(e,n):[]).map(function(e){return y.styleValue(e,t)}).filter(function(e){return null!==e})};t.toggleInlineFormat=function(c,d,f){return function(t,e){function n(){return u=!0}var r=t.schema.marks,o=c.altStyle,i=c.altMarks,i=void 0===i?[]:i,a=c.mark,s=d||t.tr,l=!1,u=!1,o=(o&&r.style&&(l=p(r.style,{style:o.name,value:o.value})(t,n,s)),b.__spreadArray([a],i).filter(function(e){return r[e]}).map(function(e){return y.hasMark(t,{mark:e})&&r[e]}).filter(function(e){return e}));return o.length?y.removeMarks(o,t,n,s):l||y.toggleMark(r[a],f,s)(t,n),u&&e(s),u}},t.applyInlineStyle=function(u,c){return function(e,t){var n,r=e.schema.marks.style,o={style:u.style,value:/^.+$/,newValue:u.value},i=e.tr,a=(c&&i.setMeta("commandName",c),i.setMeta("args",u),e.selection),s=a.empty,l=a.$cursor,a=a.ranges;return!(s&&!l||!r||!y.markApplies(e.doc,a,r))&&(l?(s=e.storedMarks||l.marks(),a={style:null},(l=r.isInSet(s)?s.find(function(e){return"style"===e.type.name}):null)&&l.attrs.style?(s=m.changeStylesString(l.attrs.style,o)).changed&&s.style&&(a.style=s.style):o.newValue&&(a.style=[o.style]+": "+o.newValue+";"),n=l?b.__assign(b.__assign({},l.attrs),a):a,Object.keys(n).some(function(e){return null!==n[e]})?t(i.addStoredMark(r.create(n))):t(i.removeStoredMark(r)),!0):p(r,o)(e,t,i))}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.setHtml=i.getHtml=i.parseContent=i.domToPmDoc=i.pmDocToFragment=i.htmlToFragment=i.trimWhitespace=void 0;function n(e,t){var n=(e.ownerDocument||document).createElement(t);Array.from(e.rows).filter(function(e){return e.getAttribute(s.rowTypeAttr)===t}).forEach(function(e){e.removeAttribute(s.rowTypeAttr),n.appendChild(e)}),n.children.length&&e.appendChild(n)}function r(e,n){var t=n.toUpperCase();e.filter(function(e){return e.nodeName===t}).forEach(function(t){Array.from(t.children).forEach(function(e){e.setAttribute(s.rowTypeAttr,n),t.parentNode&&t.parentNode.insertBefore(e,t)}),t.remove()})}var o=t(5),a=t(0),s=t(4),l=["div","ol","ul","li","table","tbody","thead","tfoot","td","th","p","tr","col","colgroup","article","main","nav","header","footer","aside","section"];i.trimWhitespace=function(e,t){t=(t=void 0===t?l:t).join("|");return e.replace(new RegExp("\\s*(<(?:"+t+")(?:\\s[^>]*?)?>)","g"),"$1").replace(new RegExp("(<\\/(?:"+t+")(?:\\s[^>]*?)?>)\\s*","g"),"$1")},i.htmlToFragment=function(e){var t=document.createElement("template");if("content"in t)t.innerHTML=e,n=t.content;else for(var t=(new DOMParser).parseFromString(e,"text/html"),n=document.createDocumentFragment(),r=t.body;r&&r.firstChild;)n.appendChild(r.firstChild);return n},i.pmDocToFragment=function(e){e=o.DOMSerializer.fromSchema(e.type.schema).serializeFragment(e.content);return Array.from(e.querySelectorAll("table")).forEach(function(e){n(e,"thead"),n(e,"tbody"),n(e,"tfoot");e=Array.from(e.children).find(function(e){return 0===e.children.length});e&&e.remove()}),e},i.domToPmDoc=function(e,t,n){return o.DOMParser.fromSchema(t).parse(e,n)},i.parseContent=function(e,t,n){e=i.htmlToFragment(e);return Array.from(e.querySelectorAll("table")).forEach(function(e){var t=Array.from(e.children),t=(t.some(function(e){return"THEAD"===e.nodeName||"TFOOT"===e.nodeName})&&(r(t,"thead"),r(t,"tbody"),r(t,"tfoot")),t.find(function(e){return"COLGROUP"===e.nodeName}));t&&(e.setAttribute(s.colgroupAttr,t.outerHTML),t.remove())}),i.domToPmDoc(e,t,n)},i.getHtml=function(e){var e=i.pmDocToFragment(e.doc),t=document.createElement("div");return t.appendChild(e),t.innerHTML},i.setHtml=function(n,r,o){return void 0===r&&(r="setHTML"),void 0===o&&(o={preserveWhitespace:"full"}),function(e,t){return t(e.tr.setSelection(new a.AllSelection(e.doc)).replaceSelectionWith(i.parseContent(n,e.schema,o)).setMeta("commandName",r))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertMsLists=void 0;function y(e){return/^MsoListParagraph/.test(e.className)}function h(e){return(e=(e=e.innerHTML).replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")}function b(e,t){return(e=document.createElement(e)).style.listStyleType=t,e}function o(e,n){var r=[];Array.from(e).forEach(function(e){var t;e.nodeType===Node.ELEMENT_NODE&&((t=e).getAttribute("datalist")?(r.push(e),n.add(r)):y(t)&&r.length?r.push(e):(r=[],"DIV"===t.nodeName?o(t.children,n):"TABLE"===t.nodeName&&Array.from(t.querySelectorAll("td,th")).forEach(function(e){o(e.children,n)})))})}function v(e){function t(e){return e.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")}var n,r=(r=e.innerHTML).replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," ");return/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(r)?{tag:"ul",style:(n=t(h(e)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(n)?null:/^o/.test(n)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(r)?{tag:"ol",style:(n=t(h(e)),r=null,r=/^\d/.test(n)?r:(/^[a-z]/.test(n)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(n)?"roman":"alpha"))}:void 0}var r=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi;t.convertMsLists=function(e){var t=document.createElement("div"),e=(t.innerHTML=e.replace(r,function(e,t,n){return'datalist="'+t+'" datalevel="'+n+'" '+e}),new Set);return o(t.children,e),e.forEach(function(e){for(var t,n,r,o,i,a,s,l=e,u=-1,c={},d=0;d<l.length;d++){var f,p,g=(f={datalist:(a=l[d]).getAttribute("datalist"),datalevel:a.getAttribute("datalevel")}).datalist,m=v(a);(s=m&&m.tag)?(p=f.datalevel||parseFloat(a.style.marginLeft||0),(f.datalevel||a.style.marginLeft)&&(f=s+g,c[p]||(c[p]={}),(!n||n<0)&&(n=p,r=g,o=(g=l.filter(function(e){return e.getAttribute("datalist")===String(r)}))[g.length-1],g=b(s,m&&m.style),a.parentNode.insertBefore(g,a),c[u=p][f]=g),i=o===a,g=c[p][f],(u<p||!g)&&(g=b(s,m&&m.style),c[p][f]=g,t.appendChild(g)),s=void 0,s=(m=a).nodeName.toLowerCase(),m.firstChild&&m.firstChild.nodeType===Node.COMMENT_NODE&&m.removeChild(m.firstChild),s=1===m.childNodes.length?m.firstChild.nodeType===Node.TEXT_NODE?h(m):m.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(m.removeChild(m.firstChild),3===m.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(m.firstChild.nodeValue)&&m.removeChild(m.firstChild),/^(&nbsp;|\s)+$/i.test(m.firstChild.innerHTML)&&m.removeChild(m.firstChild),"p"!==s?"<"+s+">"+m.innerHTML+"</"+s+">":m.innerHTML),m.parentNode.removeChild(m),(m=document.createElement("li")).innerHTML=s,t=m,g.appendChild(t),i?n=u=-1:u=p)):!t||i&&!y(a)||(a.style.marginLeft&&(a.style.marginLeft=""),a.style.marginLeft&&(a.style.margin=""),t.appendChild(a))}}),t.innerHTML}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unlink=t.link=t.superscript=t.subscript=t.strikethrough=t.underline=t.italic=t.bold=void 0,t.bold={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},t.italic={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},t.underline={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},t.strikethrough={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},t.subscript={mark:"sub"},t.superscript={mark:"sup"},t.link={mark:"link"},t.unlink={mark:"link"}},function(e,t){e.exports=u},function(e,t){e.exports=s},function(e,h,t){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.splitListItemKeepMarks=h.toggleOrderedList=h.toggleUnorderedList=h.toggleList=h.listStyle=void 0;var r=t(1),b=t(5),v=t(0),k=t(8),f=t(10),p=t(14),o=t(23);function w(d){return function(e,t,n){var r,o,i,a,s,l,u,c;return!!n&&(r=(e=n.state).schema.nodes[d.listType],o=e.selection,c=o.$from,o=o.$to,i=c.node(-2),a=c.node(-3),s=e.doc,l=r,s=0===function(e,t,n){for(var r=Array(),o=function(e,t){var n=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;t.node(t.depth);for(var r,o=t;1<=t.depth;)(r=(t=e.resolve(t.before(t.depth))).node(t.depth))&&-1!==n.indexOf(r.type.name)&&(o=t);return o}(e,t).depth,i=e.resolve(t.start(o));i.pos<=n.start(n.depth);){var a=Math.min(i.depth,o),s=i.node(a);if(s&&r.push(s),0===a)break;s=e.resolve(i.after(a));if(s.start(a)>=e.nodeSize-2)break;i=(s=s.depth!==i.depth?e.resolve(s.pos+2):s).depth?e.resolve(s.start(s.depth)):e.resolve(s.end(s.depth))}return r}(s,c,o).filter(function(e){return e.type!==l}).length,((i&&i.type===r||a&&a.type===r)&&s?g(d):(s||(g(d)(e,t),e=n.state),u=r,c=d.listAttrs,f.autoJoin(p.wrapInList(u,c=void 0===c?{}:c),function(e,t){return e.type===t.type&&e.type===u})))(e,t))}}function g(i){return function(n,e){var r=n.tr,t=n.selection,o=t.$from,t=t.$to;return r.doc.nodesBetween(o.pos,t.pos,function(e,t){if(e.isTextblock||"blockquote"===e.type.name||"div"===e.type.name)return!(!(t=(e=new v.NodeSelection(r.doc.resolve(r.mapping.map(t)))).$from.blockRange(e.$to))||e.$from.parent.type!==n.schema.nodes[i.listItem])&&null!=(e=t&&k.liftTarget(t))&&void r.lift(t,e)}),e&&e(r),!0}}var n=/list\-style\-type:\s?([\w-]+)/;h.listStyle=function(e){e=e.style||"",e=n.exec(e);return e&&e[1]||""},h.toggleList=function(e,t,n,r,o){var s,i,a,l,u,c,d,f=r.listType,p=r.listAttrs,p=void 0===p?{style:null}:p,g=e.selection,m=g.$from.node(g.$from.depth-2),y=g.$to.node(g.$to.depth-2);return m&&m.type.name===f&&h.listStyle(m.attrs)===h.listStyle(p)&&y&&y.type.name===f&&h.listStyle(y.attrs)===h.listStyle(p)?(m=n.state.schema.nodes,s={bulletList:m[r.bulletList],orderedList:m[r.orderedList],listItem:m[r.listItem]},f=function(e){for(var t,n=s.bulletList,r=s.orderedList,o=s.listItem,i=e.depth-1;0<i;i--){var a=e.node(i);if(a.type!==n&&a.type!==r||(t=i),a.type!==n&&a.type!==r&&a.type!==o)break}return t}(g.$to),i=e,a=g.$to.pos,y=g.$to.end(f),l=f,u=n.state.tr,c=(c=s.listItem)||i.schema.nodes.listItem,d=!1,u.doc.nodesBetween(a,y,function(e,t){if(!d&&e.type===c&&a<t){d=!0;for(var n=l+3;l+2<n;){var r=u.doc.resolve(u.mapping.map(t)),n=r.depth,o=u.doc.resolve(u.mapping.map(t+e.textContent.length)),r=new v.TextSelection(r,o);u=function(e,t,n,r){var o,i=r||e.schema.nodes.listItem,r=t.$from,e=t.$to;return!(t=r.blockRange(e,function(e){return e.childCount&&e.firstChild.type===i}))||t.depth<2||r.node(t.depth-1).type!==i?n:((o=t.end)<(e=e.end(t.depth))&&(n.step(new k.ReplaceAroundStep(o-1,e,o,e,new b.Slice(b.Fragment.from(i.create(void 0,t.parent.copy())),1,0),1,!0)),t=new b.NodeRange(n.doc.resolve(r.pos),n.doc.resolve(e),t.depth)),n.lift(t,k.liftTarget(t)).scrollIntoView())}(i,r,u,c)}}}),(p=function(e,t,n){var r=e.selection,o=r.from,r=r.to,i=e.schema.nodes,a=i.paragraph,s=i.heading,l=[];t.doc.nodesBetween(o,r,function(e,t){e.type!==a&&e.type!==s||l.push({node:e,pos:t})});for(var u=l.length-1;0<=u;u--){var c,d=l[u],f=t.doc.resolve(t.mapping.map(d.pos));0<f.depth&&(c=void 0,c=d.node.textContent&&0<d.node.textContent.length?t.doc.resolve(t.mapping.map(d.pos+d.node.textContent.length)):t.doc.resolve(t.mapping.map(d.pos+1)),d=f.blockRange(c))&&t.lift(d,function(e,t,n){for(var r=t.depth,o=e.nodes[n.bulletList],i=e.nodes[n.orderedList],a=e.nodes[n.listItem],s=t.depth;0<s;s--){var l=t.node(s);if(l.type!==o&&l.type!==i||(r=s),l.type!==o&&l.type!==i&&l.type!==a)break}return r-1}(e.schema,f,n))}return t}(e,p=u,r)).setMeta("commandName",o),t(p),!0):w(r)(e,t,n)},h.toggleUnorderedList=function(e,t,n){return h.toggleList(e,t,n,r.__assign({listType:o.bulletList.listType},o.bulletList.types))},h.toggleOrderedList=function(e,t,n){return h.toggleList(e,t,n,r.__assign({listType:o.orderedList.listType},o.orderedList.types))},h.splitListItemKeepMarks=function(e){return function(n,r){return p.splitListItem(e)(n,function(e){var t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();t&&e.ensureMarks(t),r(e)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liftBlockquote=t.blockquote=void 0;var r=n(10);t.blockquote=function(e,t){return r.wrapIn(e.schema.nodes.blockquote)(e,t)},t.liftBlockquote=function(e,t){var n=e.selection,r=n.$from,n=n.$to,o=e.schema.nodes.blockquote,i=e.doc,a=-1,r=r.blockRange(n),n=(r&&i.nodesBetween(r.start,r.end,function(e,t,n,r){e.type===o&&(a=t)}),-1!==a);return t&&n&&t(e.tr.lift(r,i.resolve(a).depth)),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulletList=t.orderedList=t.listsTypes=void 0;n=n(1);t.listsTypes={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},t.orderedList={listType:t.listsTypes.orderedList,types:n.__assign({},t.listsTypes)},t.bulletList={listType:t.listsTypes.bulletList,types:n.__assign({},t.listsTypes)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outdentRules=t.indentRules=void 0;var r=n(1),n=n(23);t.indentRules={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:r.__assign({},n.listsTypes)},t.outdentRules={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:r.__assign({},n.listsTypes)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pmDeleteColumn=t.pmAddColumnAfter=t.pmAddColumnBefore=t.pmAddRowAfter=t.pmAddRowBefore=t.deleteColumn=t.addColumnAfter=t.addColumnBefore=t.addRowAfter=t.addRowBefore=t.createTable=void 0;function s(e,t){var n,r;return e?(n=o.TableMap.get(e.node),t=p(t,i),(r=-1)!==(t=n.map.indexOf(t.pos-e.pos-1))?t%n.width:r):-1}function r(e,t,n){var r=s(t,e.selection),o=c.parseStrColgroup(t.node.attrs[u.colgroupAttr]);o.insertBefore(o.ownerDocument.createElement("col"),o.children[r+n]),e.setNodeMarkup(t.pos,null,l.__assign(l.__assign({},t.node.attrs),((r={})[u.colgroupAttr]=o.outerHTML,r)))}var l=n(1),o=n(6),u=(Object.defineProperty(t,"pmAddRowAfter",{enumerable:!0,get:function(){return o.addRowAfter}}),Object.defineProperty(t,"pmAddRowBefore",{enumerable:!0,get:function(){return o.addRowBefore}}),Object.defineProperty(t,"pmAddColumnBefore",{enumerable:!0,get:function(){return o.addColumnBefore}}),Object.defineProperty(t,"pmAddColumnAfter",{enumerable:!0,get:function(){return o.addColumnAfter}}),Object.defineProperty(t,"pmDeleteColumn",{enumerable:!0,get:function(){return o.deleteColumn}}),n(4)),c=n(13),d=(t.createTable=function(e,t,n){for(var r=e.table,o=e.table_row,i=e.table_cell,a=[],s=0;s<t+1;s++){for(var l=[],u=0;u<n+1;u++)l.push(i.createAndFill());a.push(o.createAndFill(void 0,l))}return r.createAndFill(void 0,a)},/^table$/),f=/^table_row$/,i=/^table_cell|table_header$/,p=function(e,t){for(var n=e.$head,r=n.depth;0<r;r--){var o=n.node(r);if(t.test(o.type.name))return{pos:n.before(r),node:o}}return null};t.addRowBefore=function(e,a){return o.addRowBefore(e,a&&function(e){var t=p(e.selection,f),n=p(e.selection,d);if(t&&n&&t.node.attrs[u.rowTypeAttr]){for(var r=0,o=0;o<n.node.nodeSize;o++)if(n.node.child(o).eq(t.node)){r=o;break}var i=n.node.child(r-1),i=t.pos-i.nodeSize;e.setNodeMarkup(i,void 0,((i={})[u.rowTypeAttr]=t.node.attrs[u.rowTypeAttr],i))}return a(e)})},t.addRowAfter=function(e,r){return o.addRowAfter(e,r&&function(e){var t,n=p(e.selection,f);return n&&n.node.attrs[u.rowTypeAttr]&&(t=n.pos+n.node.nodeSize,e.setNodeMarkup(t,void 0,((t={})[u.rowTypeAttr]=n.node.attrs[u.rowTypeAttr],t))),r(e)})};t.addColumnBefore=function(e,n){return o.addColumnBefore(e,n&&function(e){var t=p(e.selection,d);return t.node.attrs[u.colgroupAttr]&&r(e,t,-1),n(e)})},t.addColumnAfter=function(e,n){return o.addColumnAfter(e,n&&function(e){var t=p(e.selection,d);return t.node.attrs[u.colgroupAttr]&&r(e,t,1),n(e)})},t.deleteColumn=function(e,i){var a=s(p(e.selection,d),e.selection);return o.deleteColumn(e,i&&function(e){var t,n,r,o=p(e.selection,d);return o.node.attrs[u.colgroupAttr]&&(t=e,o=o,n=a,(r=c.parseStrColgroup(o.node.attrs[u.colgroupAttr])).removeChild(r.children[n]),t.setNodeMarkup(o.pos,null,l.__assign(l.__assign({},o.node.attrs),((n={})[u.colgroupAttr]=r.outerHTML,n)))),i(e)})}},function(e,t){e.exports=f},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rowResizing=void 0;var r=n(0),f=n(6),p=n(2),g=n(9),o=(i.prototype.ignoreMutation=function(e){return"attributes"===e.type&&"style"===e.attributeName&&"TR"===e.target.nodeName},i);function i(){}t.rowResizing=function(){return new r.Plugin({key:g.tableRowResizeKey,state:{init:function(e,t){return this.spec.props.nodeViews[f.tableNodeTypes(t.schema).row.name]=function(e,t){return new o},new a(-1,null)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return!g.otherResizeHandle(g.tableRowResizeKey,e)&&-1<g.tableRowResizeKey.getState(e).activeHandle?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(e,t){return g.otherResizing(g.tableRowResizeKey,e.state)||(e=e,t=t,(s=g.tableRowResizeKey.getState(e.state)).dragging||(r=-1,(n=g.domCellAround(t.target))&&(o=g.cellIndexes(n),i=(a=n.getBoundingClientRect()).top,a=a.bottom,Math.abs(t.clientY-i)<=5&&0<o.rowIndex?(o.rowIndex-=n.rowSpan,r=g.edgeCell(e,t,o)):0<a-t.clientY&&a-t.clientY<=5&&(r=g.edgeCell(e,t,o))),r!==s.activeHandle&&l(e,r))),!1;var n,r,o,i,a,s},mouseleave:function(e){return e=e,-1<(t=g.tableRowResizeKey.getState(e.state)).activeHandle&&!t.dragging&&l(e,-1),!1;var t},mousedown:function(e,t){return u=e,e=t,-1!==(t=g.tableRowResizeKey.getState(u.state)).activeHandle&&!t.dragging&&(n=(r=u.state.doc.resolve(t.activeHandle)).parent,r=r.node(-1),n=g.parseStyle(n.attrs.style).height,a=g.parseStyle(r.attrs.style).height,r=n?parseFloat(n):0,n||(r=u.nodeDOM(t.activeHandle).offsetHeight),u.dispatch(u.state.tr.setMeta(g.tableRowResizeKey,{setDragging:{startY:e.clientY,startHeight:{rowHeight:r,tableHeight:a}}})),e.view.addEventListener("mouseup",s),e.view.addEventListener("mousemove",l),e.preventDefault(),!0);function s(e){e.view.removeEventListener("mouseup",s),e.view.removeEventListener("mousemove",l);var t,n,r,o,i,a,e=g.tableRowResizeKey.getState(u.state);e.dragging&&(t=u.state.tr.setMeta(g.tableRowResizeKey,{setDragging:null}),n=u,r=t,e=e.activeHandle,o=n.state.doc,e=o.resolve(e),i=e.parent,e=e.posAtIndex(0)-1,n=n.nodeDOM(e),a=n.ownerDocument&&n.ownerDocument.defaultView||window,n.style.height=a.getComputedStyle(n).height,r.setNodeMarkup(e,null,g.setNodeStyle(i.attrs,"height",n.style.height)),a=n&&n.closest("table"),(i=a&&a.style.height)&&(a=(n=o.resolve(e)).start(n.depth)-1,r.setNodeMarkup(a,null,g.setNodeStyle(n.parent.attrs,"height",i))),u.dispatch(t))}function l(e){if(!e.which)return s(e);var t,n,r=g.tableRowResizeKey.getState(u.state),o=(o=r.dragging,i=e.clientY-o.startY,o.startHeight.rowHeight+i),i=e.clientY-r.dragging.startY;e=u,r=r.activeHandle,o=o,i=i,t=a,e=e.nodeDOM(r),(r=e&&e.parentNode)&&(r.style.height=o+"px",e=r.ownerDocument&&r.ownerDocument.defaultView||window,r.style.height=e.getComputedStyle(r).height,o=r.closest("table"),r=parseFloat(t)+i+"px",n=o&&o.style.height)&&n!==r&&(o.style.height=parseFloat(t)+i+"px",o.style.height=e.getComputedStyle(o).height)}var u,n,a,r}},decorations:function(e){if(g.otherResizing(g.tableRowResizeKey,e))return p.DecorationSet.empty;var t=g.tableRowResizeKey.getState(e);if(-1<t.activeHandle){var t=t.activeHandle,n=[];if("number"!=typeof t)return p.DecorationSet.empty;for(var r=e.doc.resolve(t),o=r.node(-1),i=f.TableMap.get(o),a=r.start(-1),s=[],l=t-a,u=-1,c=0;c<i.height;c++)s.push(i.map.slice(c*i.width,c*i.width+i.width)),-1!==s[c].indexOf(l)&&(u=c);var d=[];return s[u].forEach(function(e,t){s[u+1]&&e===s[u+1][t]||d.push(e)}),d.forEach(function(e){var t=o.nodeAt(e),e=a+e+(t?t.nodeSize:0)-1,t=document.createElement("div");t.className="row-resize-handle",n.push(p.Decoration.widget(e,t))}),p.DecorationSet.create(e.doc,n)}},nodeViews:{}}})};s.prototype.apply=function(e){var t=this,n=e.getMeta(g.tableRowResizeKey);return n&&null!=n.setHandle?new s(n.setHandle,null):n&&void 0!==n.setDragging?new s(t.activeHandle,n.setDragging):(-1<t.activeHandle&&(n=e.mapping.map(t.activeHandle,-1),t=new s(n="row"===(e=e.doc.resolve(n)).parent.type.spec.tableRole&&e.nodeAfter?n:null,t.dragging)),t)};var a=s;function s(e,t){this.activeHandle=e,this.dragging=t}function l(e,t){var n=e.state.tr;n.setMeta("addToHistory",!1),n.setMeta(g.tableRowResizeKey,{setHandle:t}),e.dispatch(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableResizing=void 0;function r(h,e){var t,o,i,n,r,a,s,l,u,c,d,f,b,p=e.target.getAttribute(w.dataResizeDirTable);return!!p&&(n=_.tableResizeKey.getState(h.state),e.preventDefault(),(t=h.state.tr).setMeta(_.tableResizeKey,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:p,nodePosition:n.nodePosition}),t.setMeta("addToHistory",!1),p=h,o=t,i=n.nodePosition,n=p.state.doc.nodeAt(i),p=_.getTable(p.nodeDOM(i)),r=R(p),a=r.width,s=r.height,l=r.colsWidth,u=r.rowsHeight,c=r.offsetWidth,r=r.offsetHeight,p=p.firstChild,d=!1,Array.from(p&&p.children||[]).forEach(function(e,t){e.style.width&&!/%$/.test(e.style.width)&&(e.style.width=100*l[t]/a+"%",d=!0)}),f=!1,n.forEach(function(e,t,n){var r=_.parseStyle(e.attrs.style).height;r&&!/%$/.test(r)&&(o.setNodeMarkup(i+t+1,null,_.setNodeStyle(e.attrs,"height",100*u[n]/s+"%")),f=!0)}),n=n.attrs,_.parseStyle(n.style).width!==c+"px"&&(n=_.setNodeStyle(n,"width",c+"px")),d&&(n[w.colgroupAttr]=p.outerHTML),f&&(n=_.setNodeStyle(n,"height",r+"px")),(d||f)&&o.setNodeMarkup(i,null,n),h.dispatch(t),(b=e.view||window).addEventListener("mouseup",function e(t){var n,r,o,i,a,s,l,u,c,d,f,p,g,m,y;b.removeEventListener("mouseup",e),b.removeEventListener("mousemove",v),n=h,g=_.tableResizeKey.getState(n.state),m=g.dragging,y=g.nodePosition,g=g.activeHandle,m&&(m=n.state.doc.nodeAt(y),u=_.getTable(n.nodeDOM(y)),r=R(u),m)&&(l=r.offsetWidth+"px",r=r.offsetHeight+"px",o=n.state.tr,m=m.attrs,i=_.parseStyle(m.style),M[g]&&u.style.width&&i.width!==l&&(m=_.setNodeStyle(m,"width",l)),O[g]&&u.style.height&&i.height!==r&&(m=_.setNodeStyle(m,"height",r)),a=o,s=y,l=m,u=(g=n).state.doc.nodeAt(s),g=_.getTable(g.nodeDOM(s)),c=(g.ownerDocument&&g.ownerDocument.defaultView||window).getComputedStyle,d=Array.from(g.rows),u.forEach(function(e,t,n){var r=_.parseStyle(e.attrs.style).height;r&&!/px$/.test(r)&&a.setNodeMarkup(s+t+1,null,_.setNodeStyle(e.attrs,"height",c(d[n]).height))}),u=g.firstChild,f=Array.from(u&&u.children||[]),p=!1,f.forEach(function(e,t){e.style.width&&!/px$/.test(e.style.width)&&(e.style.width=c(f[t]).width,p=!0)}),g=k.__assign({},l),p&&(g[w.colgroupAttr]=u.outerHTML),m=g,o.setNodeMarkup(y,null,m),o.setMeta("commandName","node-resize"),o.setMeta("args",m),o.setMeta(_.tableResizeKey,{setDragging:null,activeHandle:null,nodePosition:y}),n.dispatch(o))}),b.addEventListener("mousemove",v),!0);function v(e){var t,n,r,o,i,a,s,l,u;t=h,e=e,s=_.tableResizeKey.getState(t.state),l=s.dragging,u=s.nodePosition,s=s.activeHandle,u<0||!l||(u=(t=_.getTable(t.nodeDOM(u))).getBoundingClientRect(),n=g.directions[s],i=(e.clientX-l.startX)*n.x,r=(e.clientY-l.startY)*n.y,o=(t.ownerDocument&&t.ownerDocument.defaultView||window).getComputedStyle(t),a=/px/.test(o.width)?parseFloat(o.width):t.offsetWidth,o=/px/.test(o.height)?parseFloat(o.height):t.offsetHeight,i=n.x?i+a:u.width,a=n.y?r+o:u.height,l.startX=n.x?e.clientX:l.startX,l.startY=n.y?e.clientY:l.startY,M[s]&&(t.style.width=i+"px"),O[s]&&(t.style.height=a+"px"))}}var k=n(1),o=n(0),w=n(4),_=n(9),g=n(12),n={southeast:!0,southwest:!0,northwest:!0,northeast:!0},M=k.__assign({east:!0,west:!0},n),O=k.__assign({south:!0,north:!0},n),i=(a.prototype.apply=function(e){e=e.getMeta(_.tableResizeKey);return e?new a(e.activeHandle,e.setDragging,e.nodePosition):this},a),R=function(e){var t=Array.from(e.firstChild.children).map(function(e){return e.offsetWidth}),n=Array.from(e.rows).map(function(e){return e.offsetHeight}),r=t.reduce(function(e,t){return e+t},0),o=n.reduce(function(e,t){return e+t},0),i=e.offsetHeight;return{width:r,height:o,colsWidth:t,rowsHeight:n,offsetWidth:e.offsetWidth,offsetHeight:i}};function a(e,t,n){this.activeHandle=e,this.dragging=t,this.nodePosition=n}t.tableResizing=function(l){return void 0===l&&(l={node:"table"}),new o.Plugin({key:_.tableResizeKey,view:function(e){return{selectedNode:function(e,t){var n,r,e=e.selection;return e instanceof o.NodeSelection&&t===e.node.type&&e instanceof o.NodeSelection?{node:e.node,pos:e.from}:(r=(n=_.parentNode(e.$from,function(e){return e.type===t}))&&n.node)?{node:r,pos:e.$from.start(n.depth)-1}:null},update:function(e,t){var n,r,o=e.state,i=o.schema.nodes[l.node],a=this.selectedNode(o,i),s=this.selectedNode(t,i);!a&&s&&!t.doc.eq(e.state.doc)||!a&&!s||((r=o.tr).setMeta("addToHistory",!1),a&&s&&a.pos!==s.pos?(r.setMeta(_.tableResizeKey,{nodePosition:a.pos}),r.setNodeMarkup(s.pos,i,k.__assign(k.__assign({},s.node.attrs),((n={})[w.resizableAttr]=!1,n))),r.setNodeMarkup(a.pos,i,k.__assign(k.__assign({},a.node.attrs),((n={})[w.resizableAttr]=!0,n))),e.dispatch(r)):a&&s&&a.pos===s.pos&&!a.node.attrs[w.resizableAttr]&&!o.selection.eq(t.selection)?(r.setMeta(_.tableResizeKey,{nodePosition:a.pos}),e.dispatch(r.setNodeMarkup(a.pos,i,k.__assign(k.__assign({},a.node.attrs),((n={})[w.resizableAttr]=!0,n))))):a&&!s?(r.setMeta(_.tableResizeKey,{nodePosition:a.pos}),e.dispatch(r.setNodeMarkup(a.pos,i,k.__assign(k.__assign({},a.node.attrs),((o={})[w.resizableAttr]=!0,o))))):!a&&s&&(r.setMeta(_.tableResizeKey,{nodePosition:-1}),e.dispatch(r.setNodeMarkup(s.pos,i,k.__assign(k.__assign({},s.node.attrs),((t={})[w.resizableAttr]=!1,t))))))}}},state:{init:function(){return new i("",null,-1)},apply:function(e,t){return t.apply(e)}},props:{handleDOMEvents:{mousedown:r}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableView=void 0;var a=n(4),r=n(13),o=n(12);function i(e,t){this.node=e,this.view=t,this.dom=document.createElement("div"),this.dom.className=a.resizableWrap,this.table=this.dom.appendChild(document.createElement("table")),e.attrs[a.colgroupAttr]&&this.renderColgroup(e.attrs[a.colgroupAttr]);t=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,e.attrs),this.resizeHandles=o.handles.map(function(e){var t=document.createElement("span");return t.className=a.resizeHandle+" "+e,t.setAttribute(a.dataResizeDirTable,e),t}),this.contentDOM=t}i.prototype.update=function(e){var t,n=this;return e.type===this.node.type&&(t=this.node,(this.node=e).attrs[a.resizableAttr]?this.resizeHandles.forEach(function(e){n.dom.appendChild(e)}):Array.from(this.dom.children).filter(function(e){return e.classList.contains(a.resizeHandle)}).forEach(function(e){return e.remove()}),this.setAttributes(this.table,e.attrs),t.attrs[a.colgroupAttr]!==e.attrs[a.colgroupAttr]&&this.renderColgroup(e.attrs[a.colgroupAttr]),!0)},i.prototype.ignoreMutation=function(e){return"attributes"===e.type&&(e.target===this.table||e.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(e.target))},i.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},i.prototype.renderColgroup=function(e){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),e&&(this.colgroup=r.parseStrColgroup(e),this.table.insertBefore(this.colgroup,this.table.firstChild))},i.prototype.setAttributes=function(e,t){var n,r,o,i=[a.colgroupAttr,a.resizableAttr];for(n in t)n&&-1===i.indexOf(n)&&(r=e.getAttribute(n),(o=t[n])&&o!==r?e.setAttribute(n,o):o||e.removeAttribute(n))},t.TableView=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.columnResizing=void 0;var b=n(1),r=n(0),v=n(6),f=n(2),k=n(4),o=n(31),w=n(9),i=(t.columnResizing=function(){var n=o.TableView;return new r.Plugin({key:w.tableColumnResizeKey,state:{init:function(e,t){return this.spec.props.nodeViews[v.tableNodeTypes(t.schema).table.name]=function(e,t){return new n(e,t)},new i(-1,null)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return!w.otherResizeHandle(w.tableColumnResizeKey,e)&&-1<w.tableColumnResizeKey.getState(e).activeHandle?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,t){return w.otherResizing(w.tableColumnResizeKey,e.state)||(e=e,t=t,(s=w.tableColumnResizeKey.getState(e.state)).dragging||(r=-1,(n=w.domCellAround(t.target))&&(o=w.cellIndexes(n),i=(a=n.getBoundingClientRect()).left,a=a.right,Math.abs(t.clientX-i)<=5&&0<o.cellIndex?(o.cellIndex-=n.colSpan,r=w.edgeCell(e,t,o)):0<a-t.clientX&&a-t.clientX<=5&&(r=w.edgeCell(e,t,o))),r!==s.activeHandle&&l(e,r))),!1;var n,r,o,i,a,s},mouseleave:function(e){return e=e,-1<(t=w.tableColumnResizeKey.getState(e.state)).activeHandle&&!t.dragging&&l(e,-1),!1;var t},mousedown:function(e,t){var s=e,e=t,l=25;if(-1===(t=w.tableColumnResizeKey.getState(s.state)).activeHandle||t.dragging)return!1;for(var n=s.state.doc.resolve(t.activeHandle),r=n.parent,o=n.index(),i=0,a=0;a<=o;a++)i+=r.child(a).attrs.colspan;var u=n.node(n.depth-1),t=(t=s.domAtPos(t.activeHandle)).node.childNodes[t.offset].closest("table");if(u.attrs[k.colgroupAttr])(p=(d=t.firstChild).children[i-1]).style.width||(p.style.width=p.offsetWidth+"px");else{for(var c=0,a=0;a<r.childCount;a++)c+=r.child(a).attrs.colspan;for(var d=document.createElement("colgroup"),f=new Array(c),a=0;a<c;a++)f[a]=document.createElement("col"),d.appendChild(f[a]);t.insertBefore(d,t.firstChild),(p=f[o]).style.width=p.offsetWidth+"px",g=b.__assign(b.__assign({},u.attrs),((g={})[k.colgroupAttr]="<colgroup>"+f.reduce(function(e,t){return e+t.outerHTML},"")+"</colgroup>",g))}var p,g,m=parseFloat(p.style.width),m=s.state.tr.setMeta(w.tableColumnResizeKey,{setDragging:{startX:e.clientX,startWidth:m}});function y(e){e.view.removeEventListener("mouseup",y),e.view.removeEventListener("mousemove",h);var t,n,r,o,i,a=w.tableColumnResizeKey.getState(s.state);a.dragging&&(t=s.state.tr,n=s,r=t,o=a.activeHandle,_(a.dragging,e,l),o=n.state.doc.resolve(o),a=o.node(-1),e=o.start(-1),o=o.posAtIndex(0,o.depth-1)-1,n=n.nodeDOM(e).closest("table"),e=a.attrs,a&&e[k.colgroupAttr]&&(a=n.firstChild,e=b.__assign(b.__assign({},e),((i={})[k.colgroupAttr]=a.outerHTML,i))),a=n.style.width,n&&a&&w.parseStyle(e.style).width!==a&&(e=w.setNodeStyle(e,"width",a)),r.setNodeMarkup(o,null,e),s.dispatch(t.setMeta(w.tableColumnResizeKey,{setDragging:null})))}function h(e){if(!e.which)return y(e);var t,n,r,o=w.tableColumnResizeKey.getState(s.state),e=_(o.dragging,e,l);t=s,o=o.activeHandle,e=e,o=t.state.doc.resolve(o),n=o.node(-1),r=o.start(-1),n=v.TableMap.get(n).colCount(o.pos-r)+o.nodeAfter.attrs.colspan-1,o=(t=r="TABLE"!==(r=t.domAtPos(o.start(-1)).node).nodeName?r.closest("table"):r).firstChild,(r=Array.from(o.children))[n].style.width=e+"px",t.style.width&&(o=r.map(function(e){return e.style.width})).every(Boolean)&&(n=o.reduce(function(e,t){return e+parseFloat(t)},0),t.style.width=n+"px")}return t.style.width||(t=Array.from(p.parentNode.children).map(function(e){return e.style.width})).every(Boolean)&&(p=t.reduce(function(e,t){return e+parseFloat(t)},0),g=w.setNodeStyle(g||u.attrs,"width",p+"px")),g&&(t=n.posAtIndex(0,n.depth-1)-1,m.setNodeMarkup(t,null,g)),s.dispatch(m),e.view.addEventListener("mouseup",y),e.view.addEventListener("mousemove",h),e.preventDefault(),!0}},decorations:function(e){if(!w.otherResizing(w.tableColumnResizeKey,e)){var t=w.tableColumnResizeKey.getState(e);if(-1<t.activeHandle){t=t.activeHandle;for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=v.TableMap.get(o),a=r.start(-1),s=[],l=t-a,u=-1,c=0;c<i.height;c++)s.push(i.map.slice(c*i.width,c*i.width+i.width)),-1===u&&(u=s[c].lastIndexOf(l));var d=[];return s.forEach(function(e){var t=e[u];e[u]!==e[u+1]&&d.push(t)}),d.forEach(function(e){var e=a+e+o.nodeAt(e).nodeSize-1,t=document.createElement("div");t.className="column-resize-handle",n.push(f.Decoration.widget(e,t))}),f.DecorationSet.create(e.doc,n);return}}return f.DecorationSet.empty},nodeViews:{}}})},a.prototype.apply=function(e){var t=this,n=e.getMeta(w.tableColumnResizeKey);return n&&null!=n.setHandle?new a(n.setHandle,null):n&&void 0!==n.setDragging?new a(t.activeHandle,n.setDragging):(-1<t.activeHandle&&e.docChanged&&(n=e.mapping.map(t.activeHandle,-1),e=e.doc.resolve(n),t=new a(n=Boolean("row"===e.parent.type.spec.tableRole&&e.nodeAfter)?n:-1,t.dragging)),t)},a);function a(e,t){this.activeHandle=e,this.dragging=t}function _(e,t,n){t=t.clientX-e.startX;return Math.max(n,e.startWidth+t)}function l(e,t){var n=e.state.tr;n.setMeta("addToHistory",!1),n.setMeta(w.tableColumnResizeKey,{setHandle:t}),e.dispatch(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableRowResizeKey=t.tableColumnResizeKey=t.tableResizeKey=t.tableResizing=void 0;var r=n(32),o=n(30),i=n(29),a=(t.tableResizing=function(){return[o.tableResizing(),r.columnResizing(),i.rowResizing()]},n(9));Object.defineProperty(t,"tableResizeKey",{enumerable:!0,get:function(){return a.tableResizeKey}}),Object.defineProperty(t,"tableColumnResizeKey",{enumerable:!0,get:function(){return a.tableColumnResizeKey}}),Object.defineProperty(t,"tableRowResizeKey",{enumerable:!0,get:function(){return a.tableRowResizeKey}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.caretColor=t.caretColorKey=void 0;var r=n(0),a=n(2),s=n(7);t.caretColorKey=new r.PluginKey("caret-color"),t.caretColor=function(){return new r.Plugin({key:t.caretColorKey,props:{decorations:function(e){var n,r,o,t=e.doc,i=e.selection,e=e.storedMarks;return i.empty&&e&&(n=s.styleValue((e||[]).find(function(e){return"style"===e.type.name}),{name:"color",value:/^.+$/}))?(r=i.$anchor.parent,o=[],t.descendants(function(e,t){e.eq(r)&&o.push(a.Decoration.node(t,t+e.nodeSize,{style:"caret-color: "+n}))}),a.DecorationSet.create(t,o)):a.DecorationSet.empty}}})}},function(e,f,t){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.imageResizing=f.imageResizeKey=void 0;var p=t(1),g=t(0),l=t(2),m=t(4),y=t(3),h=t(12),b=(f.imageResizeKey=new g.PluginKey("image-resize"),function(e,t,n){e.style[t]=n+"px"}),v=/[^\-]width:|[^\-]height:/,k=/^.+$/,n=(r.prototype.apply=function(e){e=e.getMeta(f.imageResizeKey);return e?new r(e.activeHandle,e.setDragging,e.rect,e.nodePosition):this},r);function r(e,t,n,r){this.activeHandle=e,this.dragging=t,this.rect=n,this.nodePosition=r}f.imageResizing=function(s){return void 0===s&&(s={node:"image",lockRatio:!0}),new g.Plugin({key:f.imageResizeKey,view:function(e){return{resize:function(){f.imageResizeKey.getState(e.state).rect&&e.dispatch(e.state.tr.setMeta("resize",!0))},get window(){return e.dom.ownerDocument&&e.dom.ownerDocument.defaultView},attachResize:function(){var e=this.window;e&&(e.removeEventListener("resize",this.resize),e.addEventListener("resize",this.resize))},removeResize:function(){var e=this.window;e&&e.removeEventListener("resize",this.resize)},update:function(e,t){var n=e.state,r=n.selection,o=n.schema.nodes[s.node],i=f.imageResizeKey.getState(n),a=i.rect;r instanceof g.NodeSelection&&o===r.node.type?(o={top:(o=e.nodeDOM(r.from)).offsetTop,left:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight},t.selection.eq(r)&&(!a||a.width===o.width&&a.height===o.height&&a.top===o.top&&a.left===o.left)||((t=n.tr).setMeta(f.imageResizeKey,{rect:o,nodePosition:r.from}),e.dispatch(t),this.attachResize())):a&&(i.rect=null,i.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new n("",null,null,-1)},apply:function(e,t){return t.apply(e)}},props:{handleDOMEvents:{mousedown:function(e,t){return d=e,u=s,!!(t=(e=t).target.getAttribute(m.dataResizeDirImage))&&(n=f.imageResizeKey.getState(d.state),e.preventDefault(),(r=d.state.tr).setMeta(f.imageResizeKey,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:t,rect:n.rect,nodePosition:n.nodePosition}),r.setMeta("addToHistory",!1),d.dispatch(r),e.view.addEventListener("mouseup",function e(t){var n,r,o,i,a,s,l,u;t.view.removeEventListener("mouseup",e),t.view.removeEventListener("mousemove",c),t=d,s=f.imageResizeKey.getState(t.state),l=s.rect,u=s.dragging,s=s.nodePosition,u&&l&&(u=t.state.selection)instanceof g.NodeSelection&&(a=u.node.attrs,n=l.width,r=l.height,o=void 0,o=v.test(a.style||"")?(i=y.changeStylesString(a.style,{style:"width",value:k,newValue:n+"px"}),i=y.changeStylesString(i.style||"",{style:"height",value:k,newValue:r+"px"}).style,p.__assign(p.__assign({},a),{style:i})):p.__assign(p.__assign({},a),{width:n,height:r}),i=u.node.type.createAndFill(o))&&((a=t.state.tr).replaceWith(s,s+1,i),a.setSelection(g.NodeSelection.create(a.doc,s)),a.setMeta("commandName","image-resize"),a.setMeta("args",o),a.setMeta(f.imageResizeKey,{setDragging:null,activeHandle:null,rect:l,nodePosition:s}),t.dispatch(a))}),e.view.addEventListener("mousemove",c),!0);function c(e){var t,n,r,o,i,a,s,l;t=d,e=e,n=u,i=f.imageResizeKey.getState(t.state),a=i.rect,s=i.dragging,l=i.nodePosition,i=i.activeHandle,s&&a&&(t=t.nodeDOM(l),l=h.directions[i],i=(e.clientX-s.startX)*l.x,r=(e.clientY-s.startY)*l.y,i=l.x?i+t.width:a.width,r=l.y?r+t.height:a.height,n.lockRatio&&l.x&&l.y?(n=Math.min(i/t.width,r/t.height),o=t.width*n,n=t.height*n,s.startX=e.clientX-(i-o)*l.x,s.startY=e.clientY-(r-n)*l.y,i=o,r=n):(s.startX=l.x?e.clientX:s.startX,s.startY=l.y?e.clientY:s.startY),b(t,"width",i),b(t,"height",r),a.top=t.offsetTop,a.left=t.offsetLeft,a.width=t.offsetWidth,a.height=t.offsetHeight,(o=t.nextElementSibling).style.width=a.width+"px",o.style.height=a.height+"px",o.style.top=a.top+"px",o.style.left=a.left+"px")}var d,u,n,r}},decorations:function(e){var t=e.selection,n=e.schema.nodes[s.node],r=f.imageResizeKey.getState(e).rect;if(r&&t instanceof g.NodeSelection&&n===t.node.type){var o=document.createElement("div");o.className="k-editor-resize-handles-wrapper",o.style.width=r.width+"px",o.style.height=r.height+"px",o.style.top=r.top+"px",o.style.left=r.left+"px";for(var i=0;i<h.handles.length;i++){var a=document.createElement("div");a.className=m.resizeHandle+" "+h.handles[i],a.setAttribute(m.dataResizeDirImage,h.handles[i]),o.appendChild(a)}return l.DecorationSet.create(e.doc,[l.Decoration.widget(e.selection.from+1,o)])}return l.DecorationSet.empty}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textHighlight=t.textHighlightKey=void 0;var r=n(0),o=n(2);t.textHighlightKey=new r.PluginKey("highlight"),t.textHighlight=function(e){return void 0===e&&(e=t.textHighlightKey),new r.Plugin({key:e,state:{init:function(){return null},apply:function(e){return e.getMeta(this.spec.key)}},props:{decorations:function(e){var t=(this.spec.key.getState(e)||[]).map(function(e){return o.Decoration.inline(e.from,e.to,e.attrs)});return o.DecorationSet.create(e.doc,t)}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spacesFix=void 0;var r=n(0),l=n(2),u=/\s+/g,c=/text-align/;t.spacesFix=function(){return new r.Plugin({key:new r.PluginKey("spaces-fix"),props:{decorations:function(e){var r,o,i,a,s=[],e=e.doc;return e.nodesBetween(0,e.content.size,function(e,t,n){if(e.type.isText&&c.test(n&&n.attrs&&n.attrs.style||""))for(o=u.exec(e.text||"");null!==o;){if(r=t+o.index,i=o[0].length,o.index+i<o.input.length)for(a=0;a<=i-1;a+=2)s.push(l.Decoration.inline(r+a,r+a+1,{style:"white-space: normal"}));o=u.exec(e.text||"")}}),l.DecorationSet.create(e,s)}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.placeholder=void 0;var o=n(0),i=n(2);t.placeholder=function(e){var r={class:"k-placeholder","data-placeholder":e};return new o.Plugin({key:new o.PluginKey("placeholder"),props:{decorations:function(e){var n,e=e.doc,t=e.content.firstChild;return 0===e.childCount||1===e.childCount&&t.inlineContent&&0===t.childCount?(n=[],e.descendants(function(e,t){n.push(i.Decoration.node(t,t+e.nodeSize,r))}),i.DecorationSet.create(e,n)):i.DecorationSet.empty}}})}},function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.replaceAll=s.replace=s.findAll=s.find=s.findAt=void 0;var l=t(1),v=t(0),o=(s.findAt=function(i,e,a,s,l){var u,c,d,f,p,g,m,y=[],h=[],t=e.matchCase,b=e.matchWord,n=e.useRegExp,e=e.text;return(e=n&&(/^\\$/.test(e)||/[^\\]\\$/.test(e))?e.substring(0,e.length-1):e)&&(t=t?"g":"gi",m=n?new RegExp(e,t):r(e,t),i.nodesBetween(a,s,function(e,o,t){if(l(y))return!1;e.inlineContent&&o+e.content.size>=a&&(h.length=0,e.nodesBetween(0,e.content.size,function(e,t,n,r){if(l(y))return!1;t=1+o+t;if(e.isText&&t+e.nodeSize>=a){if(p=e.text||"",g=n.childCount-1>=r+1&&n.child(r+1),h.push(a<=t?{text:p,start:t}:{text:p.slice(a-t),start:a}),!g||!g.isText)for(c=h.map(function(e){return e.text}).join(""),u=m.exec(c);null!==u&&(d=h[0].start+u.index,f=d+u[0].length,a<=d&&f<=s&&k(u,b)&&y.push(v.TextSelection.create(i,d,f)),!l(y));)u=m.exec(c)}else h.length=0}))})),y},s.find=function(e,t){var n=t.backward,r=t.matchCyclic,t=l.__rest(t,["backward","matchCyclic"]),o=n?function(){return!1}:function(e){return 0<e.length},i=e.doc,e=e.selection,a=[];return n?!(a=s.findAt(i,t,0,e.from,o)).length&&r&&(a=s.findAt(i,t,e.from,i.content.size,o)):!(a=s.findAt(i,t,e.to,i.content.size,o)).length&&r&&(a=s.findAt(i,t,0,e.to,o)),a.length?a[a.length-1]:null},s.findAll=function(e,t){return s.findAt(e,t,0,e.content.size,function(){return!1})},s.replace=function(e,t,n){var r=e.from,e=e.to;return n.insertText(t,r,e).setSelection(v.TextSelection.create(n.doc,r,r+t.length)),n},s.replaceAll=function(e,t,n){var r=s.findAll(e.doc,n);if(0===r.length)return null;for(var o=e.tr,i=r.length-1;0<=i;i--)o.insertText(t,r[i].from,r[i].to);return o},/^[\s0-9~`!@#$%\^&*\(\)_\-=+\\|\[\]{};:'"\?/.,<>]?$/),k=function(e,t){var n,r;return!t||(!0===t?(n=(r=e.input).charAt(e.index-1),r=r.charAt(e.index+e[0].length),o.test(n)&&o.test(r)):t(e))},r=function(e,t){e=e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/\s/g,"\\s");return new RegExp(e,t)}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.replaceImageSourcesFromRtf=a.pasteCleanup=a.sanitizeStyleAttr=a.sanitizeClassAttr=a.removeAttribute=a.removeTag=a.removeComments=a.sanitize=void 0;var n=t(17),s=(a.sanitize=function(e){return(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")},a.removeComments=function(e){return e.replace(/<!--[\s\S]+?-->/g,"")},a.removeTag=function(e,t){return e.replace(new RegExp("<\\/?("+t+")(?:\\s[^>]*?)?>","gi"),"")},a.removeAttribute=function(e){e.ownerElement&&e.ownerElement.removeAttribute(e.name)},a.sanitizeClassAttr=function(e){/^Mso/.test(e.value)&&a.removeAttribute(e)},/\s*;\s*/),l=/\s*:\s*/;a.sanitizeStyleAttr=function(e){var t,n,r=e.value.split(s).filter(function(e){return Boolean(e)}),o=e.ownerElement.style,i="";r.forEach(function(e){e=e.split(l);t=e[0],n=e[1],void 0!==o[t]&&(i+=t+": "+n+"; ")}),(i=i.trim())?e.value=i:a.removeAttribute(e)},a.pasteCleanup=function(e,s){var t;return s.convertMsLists&&(e=n.convertMsLists(e)),s.stripTags&&(e=a.removeTag(e,s.stripTags)),s.attributes&&((t=document.createElement("div")).innerHTML=e,Array.from(t.querySelectorAll("*")).forEach(function(e){var t=e,n=s.attributes;if(t.nodeType===Node.ELEMENT_NODE){for(var r=t.attributes.length-1;0<=r;r--){var o=t.attributes[r];n[o.name]?n[o.name](o):n["*"]&&n["*"](o)}if("SPAN"===t.nodeName&&0===t.attributes.length){var i=t,a=i.parentNode;if(a){for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}}}),e=t.innerHTML),e};var u=/<img\s[^>]*?src=(?:'|")file:\/[^'"]+(?:'|")[^>]*>/gi,c=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,d=new RegExp("(?:("+c.source+"))([\\da-fA-F\\s]+)\\}","g"),f=/[^\da-fA-F]/g,p=/file:\/[^'"]+\.(jpg|png|gif)/i,g=/\\(png|jpeg)blip\\/;a.replaceImageSourcesFromRtf=function(e,t){var n=e.match(u);if(!n||-1===t.types.indexOf("text/rtf"))return e;var t=t.getData("text/rtf"),r=[],o=t.match(d);if(!t||!o)return e;for(var i=0,a=o;i<a.length;i++){var s=a[i],l=g.exec(s);l&&(s=s.replace(c,"").replace(f,""),r.push("data:image/"+l[1]+";base64,"+function(e){for(var t=e.length,n=new Array(t/2),r=0;r<t;r+=2)n[r]=String.fromCharCode(parseInt(e.substring(r,r+2),16));return btoa(n.join(""))}(s)))}return n.length!==r.length?e:e.replace(u,function(e){var t=r.shift()||"";return e.replace(p,t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildListKeymap=t.buildKeymap=void 0;var o=n(1),i=n(10),a=n(20),s=n(19),r=n(21),l=n(18),u=n(15),c=n(3),d="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);t.buildKeymap=function(e,t){var n,r={},t=t&&t.applyToWord||!1;return r["Mod-z"]=a.undo,r["Shift-Mod-z"]=a.redo,r.Backspace=i.chainCommands(s.undoInputRule,i.deleteSelection,i.joinBackward,i.selectNodeBackward),r.Enter=i.chainCommands(i.newlineInCode,i.createParagraphNear,i.liftEmptyBlock,i.splitBlockKeepMarks),d||(r["Mod-y"]=a.redo),e.marks.strong&&(r["Mod-b"]=c.expandToWordWrap(u.toggleInlineFormat,o.__assign(o.__assign({},l.bold),{applyToWord:t}))),e.marks.em&&(r["Mod-i"]=c.expandToWordWrap(u.toggleInlineFormat,o.__assign(o.__assign({},l.italic),{applyToWord:t}))),e.marks.u&&(r["Mod-u"]=c.expandToWordWrap(u.toggleInlineFormat,o.__assign(o.__assign({},l.underline),{applyToWord:t}))),e.nodes.hard_break&&(n=e.nodes.hard_break,t=i.chainCommands(i.exitCode,function(e,t){return t(e.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0}),r["Shift-Enter"]=t),r},t.buildListKeymap=function(e){var t={};return e.nodes.list_item&&(t.Enter=r.splitListItemKeepMarks(e.nodes.list_item)),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.alignRemoveRules=t.alignJustifyRules=t.alignCenterRules=t.alignRightRules=t.alignLeftRules=void 0;function r(e,t){return{name:e,value:t}}t.alignLeftRules=[{node:"paragraph",style:[r("text-align","left")]},{node:"heading",style:[r("text-align","left")]}],t.alignRightRules=[{node:"paragraph",style:[r("text-align","right")]},{node:"heading",style:[r("text-align","right")]}],t.alignCenterRules=[{node:"paragraph",style:[r("text-align","center")]},{node:"heading",style:[r("text-align","center")]}],t.alignJustifyRules=[{node:"paragraph",style:[r("text-align","justify")]},{node:"heading",style:[r("text-align","justify")]}],t.alignRemoveRules=[{node:"paragraph",style:[r("text-align","")]},{node:"heading",style:[r("text-align","")]}]},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.outdent=i.indent=i.canBeIndented=i.canOutdentAsListItem=i.canIndentAsListItem=i.isIndented=i.indentBlocks=void 0;var a=t(14),s=t(24),l=t(11),o=t(3),u=t(22);i.indentBlocks=function(a,r,s){return function(e,t){var n=l.blockNodes(e),i=e.tr,e=(i.setMeta("commandName",r),n.forEach(function(t){var e,n,r,o;t.type.isTextblock&&(e=void 0,(n=a.find(function(e){return e.node===t.type.name}))&&(r={name:o="rtl"===s?n.rtlStyle:n.style,value:0<n.step?""+n.step+n.unit:""},t.attrs.style&&(o=new RegExp(o+":\\s?(\\d+)"+n.unit,"i"),o=t.attrs.style.match(o))&&(o=parseFloat(o[1])+n.step,r.value=""+(o=o<=0?"":o)+(o?n.unit:"")),e=l.addStyles(t,[r])),e)&&l.changeTextBlock(i,t,t.type,e)}),i.docChanged);return e&&t(i.scrollIntoView()),e}},i.isIndented=function(e,r,o){var i=!1;return l.blockNodes(e).forEach(function(t){var e,n;!i&&t.type.isTextblock&&t.attrs.style&&(e=r.find(function(e){return e.node===t.type.name}))&&(n="rtl"===o?e.rtlStyle:e.style,n=new RegExp(n+":\\s?\\d+"+e.unit,"i"),i=n.test(t.attrs.style))}),i},i.canIndentAsListItem=function(e,t){return a.sinkListItem(t)(e)},i.canOutdentAsListItem=function(e,t){var n=e.schema.nodes[t.listsTypes.listItem],r=e.schema.nodes[t.listsTypes.orderedList],t=e.schema.nodes[t.listsTypes.bulletList],r=!!o.findNthParentNodeOfType(r,2)(e.selection),t=!!o.findNthParentNodeOfType(t,2)(e.selection);return(r||t)&&a.liftListItem(n)(e)},i.canBeIndented=function(t,e){var n=t.schema.nodes,r=n[s.indentRules.listsTypes.listItem];return(i.isIndented(t,e.nodes)||s.indentRules.nodes.some(function(e){return n[e.node]&&l.hasNode(t,n[e.node])}))&&!l.hasNode(t,r)},i.indent=function(e,t){var n=e.schema.nodes[s.indentRules.listsTypes.listItem],r=i.canBeIndented(e,s.indentRules);i.canIndentAsListItem(e,n)?a.sinkListItem(n)(e,t):r&&i.indentBlocks(s.indentRules.nodes)(e,t)},i.outdent=function(e,t){var n=e.schema.nodes,r=n[s.outdentRules.listsTypes.listItem],o=i.canBeIndented(e,s.outdentRules);l.hasNode(e,n.blockquote)?u.liftBlockquote(e,t):i.canOutdentAsListItem(e,s.outdentRules)?a.liftListItem(r)(e,t):o&&i.indentBlocks(s.outdentRules.nodes)(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanFormatting=void 0;var a=n(11),s=n(7);t.cleanFormatting=function(i){return void 0===i&&(i={blocksInSelection:!0}),function(e,t){var n=e.tr,r=i.blocksInSelection,o=i.blockNodeType,e=(i.exceptMarks||[e.schema.marks.link]).filter(Boolean),e=(s.cleanMarks(n,{except:e}),a.cleanTextBlockFormatting(n,{blocksInSelection:r,blockNodeType:o}),n.docChanged);return e&&t&&t(n),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAligned=t.alignBlocks=void 0;var a=n(11);t.alignBlocks=function(o,i){return function(e,t){var n=a.blockNodes(e),r=e.tr,e=(r.setMeta("commandName",i),n.forEach(function(t){var e,n;t.type.isTextblock&&(e={},(n=o.find(function(e){return e.node===t.type.name}))&&(e=a.addStyles(t,n.style)),a.changeTextBlock(r,t,t.type,e))}),r.docChanged);return e&&t(r.scrollIntoView()),e}},t.isAligned=function(e,n){var r=!1;return a.blockNodes(e).forEach(function(t){var e;!r&&t.type.isTextblock&&t.attrs.style&&(e=n.find(function(e){return e.node===t.type.name}))&&(r=e.style.every(function(e){return!!e.value&&new RegExp(e.name+":\\s?"+e.value,"i").test(t.attrs.style)}))}),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertImage=void 0;var o=n(3);t.insertImage=function(r){return function(e,t){var n=e.schema.nodes.image.createAndFill(r);o.insertNode(n)(e,function(e){return t(e.setMeta("commandName","insertImage").setMeta("args",r))})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertText=void 0,t.insertText=function(n){return function(e,t){t(e.tr.insertText(n.text,n.from,n.to))}}},function(e,O,t){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.applyLink=O.removeLink=void 0;var R=t(15),S=t(7),A=t(0);O.removeLink=function(f,p){return function(e,t){var n=e.selection.$cursor;if(n){for(var r,o=n.parent,i=n.index(),a=e.schema.marks[f.mark],s=o.child(i).marks.find(function(e){return e.type===a}),l=o.childCount,u=n.pos-n.textOffset,c=o.child(i).nodeSize,d=void 0,d=i-1;0<=d&&s.isInSet(o.child(d).marks);)c+=r=o.child(d).nodeSize,u-=r,--d;for(d=i+1;d<l&&s.isInSet(o.child(d).marks);)c+=o.child(d).nodeSize,d+=1;t(S.removeMark(p||e.tr,u,u+c,s))}else R.toggleInlineFormat(f,p)(e,t)}},O.applyLink=function(e,w){var _=e.mark,M=e.attrs;return void 0===w&&(w="link"),function(t,e){function n(){return s=!0}var r,o,i=t.schema.marks,a=t.tr,s=(w&&(a.setMeta("commandName",w),a.setMeta("args",M)),!1);if(function(e){e=S.selectionMarks(t,e);return 1===e.length&&e[0]&&e[0]}(i[_])){r={mark:_,attrs:M},o=a;var l=n,u=(d=(m=t).selection).$cursor,c=d.from,d=d.to,f=m.schema.marks[r.mark];if(u){for(var p,g=u.parent,m=u.index(),y=g.child(m).marks.find(function(e){return e.type===f}),h=g.childCount,b=u.pos-u.textOffset,v=g.child(m).nodeSize,k=void 0,k=m-1;0<=k&&y.isInSet(g.child(k).marks);)v+=p=g.child(k).nodeSize,b-=p,--k;for(k=m+1;k<h&&y.isInSet(g.child(k).marks);)v+=g.child(k).nodeSize,k+=1;o.removeMark(b,b+v,f),o.addMark(b,b+v,f.create(r.attrs)),l(o)}else o.doc.nodesBetween(c,d,function(e,t){e.isInline&&f.isInSet(e.marks)&&(o.removeMark(t,t+e.nodeSize,f),o.addMark(t,t+e.nodeSize,f.create(r.attrs)),l(o))})}else S.hasMark(u=t,{mark:_})&&(O.removeLink({mark:_,attrs:M},a)(t,n),u=A.EditorState.create({doc:a.doc,selection:a.selection})),(s?S.toggleMark(i[_],M,a):R.toggleInlineFormat({mark:_},a,M))(u,n);return s&&e(a),s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expandToWordWrap=t.expandSelection=t.selectedLineTextOnly=t.getNodeFromSelection=t.getSelectionText=t.hasSameMarkup=t.liftBlockquote=t.blockquote=t.listStyle=t.toggleList=t.toggleUnorderedList=t.toggleOrderedList=t.indentBlocks=t.canBeIndented=t.isIndented=t.canOutdentAsListItem=t.outdent=t.canIndentAsListItem=t.indent=t.selectionMarks=t.cleanMarks=t.removeAllMarks=t.getActiveMarks=t.getMark=t.hasMark=t.cleanTextBlockFormatting=t.blockNodes=t.changeTextBlock=t.parentBlockFormat=t.getBlockFormats=t.formatBlockElements=t.activeNode=t.hasNode=t.cleanFormatting=t.isAligned=t.alignBlocks=t.insertImage=t.insertText=t.removeLink=t.applyLink=t.toggleInlineFormat=t.getInlineStyles=t.applyInlineStyle=t.pmDocToFragment=t.domToPmDoc=t.htmlToFragment=t.trimWhitespace=t.parseContent=t.setHtml=t.getHtml=void 0,t.tableEditingKey=t.tableEditing=t.TableMap=t.tableRowResizeKey=t.tableColumnResizeKey=t.tableResizeKey=t.tableResizing=t.caretColorKey=t.caretColor=t.imageResizeKey=t.imageResizing=t.textHighlightKey=t.textHighlight=t.spacesFix=t.placeholder=t.replaceAll=t.replace=t.findAll=t.findAt=t.find=t.convertMsLists=t.replaceImageSourcesFromRtf=t.removeAttribute=t.sanitizeStyleAttr=t.sanitizeClassAttr=t.pasteCleanup=t.removeTag=t.removeComments=t.sanitize=t.link=t.superscript=t.subscript=t.strikethrough=t.underline=t.italic=t.bold=t.buildListKeymap=t.buildKeymap=t.marks=t.nodes=t.outdentRules=t.indentRules=t.alignRemoveRules=t.alignJustifyRules=t.alignRightRules=t.alignCenterRules=t.alignLeftRules=t.indentHtml=t.insertNode=t.canInsert=void 0,t.pmDeleteColumn=t.pmAddRowBefore=t.pmAddRowAfter=t.pmAddColumnAfter=t.pmAddColumnBefore=t.deleteColumn=t.addColumnAfter=t.addColumnBefore=t.addRowBefore=t.addRowAfter=t.createTable=t.nextCell=t.moveCellForward=t.removeColSpan=t.findCell=t.cellAround=t.updateColumnsOnResize=t.columnResizingPluginKey=t.columnResizing=t.columnIsHeader=t.colCount=t.addColumn=t.addColSpan=t.addRow=t.rowIsHeader=t.deleteRow=t.mergeCells=t.splitCellWithType=t.splitCell=t.toggleHeaderRow=t.toggleHeaderColumn=t.toggleHeaderCell=t.toggleHeader=t.goToNextCell=t.setCellAttr=t.selectionCell=t.selectedRect=t.CellSelection=t.inSameTable=t.deleteTable=t.isInTable=t.fixTablesKey=t.fixTables=t.tableNodes=t.tableNodeTypes=void 0;var r,o=n(1),i=n(16),a=(Object.defineProperty(t,"getHtml",{enumerable:!0,get:function(){return i.getHtml}}),Object.defineProperty(t,"setHtml",{enumerable:!0,get:function(){return i.setHtml}}),Object.defineProperty(t,"parseContent",{enumerable:!0,get:function(){return i.parseContent}}),Object.defineProperty(t,"trimWhitespace",{enumerable:!0,get:function(){return i.trimWhitespace}}),Object.defineProperty(t,"htmlToFragment",{enumerable:!0,get:function(){return i.htmlToFragment}}),Object.defineProperty(t,"domToPmDoc",{enumerable:!0,get:function(){return i.domToPmDoc}}),Object.defineProperty(t,"pmDocToFragment",{enumerable:!0,get:function(){return i.pmDocToFragment}}),n(15)),s=(Object.defineProperty(t,"applyInlineStyle",{enumerable:!0,get:function(){return a.applyInlineStyle}}),Object.defineProperty(t,"getInlineStyles",{enumerable:!0,get:function(){return a.getInlineStyles}}),Object.defineProperty(t,"toggleInlineFormat",{enumerable:!0,get:function(){return a.toggleInlineFormat}}),n(48)),l=(Object.defineProperty(t,"applyLink",{enumerable:!0,get:function(){return s.applyLink}}),Object.defineProperty(t,"removeLink",{enumerable:!0,get:function(){return s.removeLink}}),n(47)),u=(Object.defineProperty(t,"insertText",{enumerable:!0,get:function(){return l.insertText}}),n(46)),c=(Object.defineProperty(t,"insertImage",{enumerable:!0,get:function(){return u.insertImage}}),n(45)),d=(Object.defineProperty(t,"alignBlocks",{enumerable:!0,get:function(){return c.alignBlocks}}),Object.defineProperty(t,"isAligned",{enumerable:!0,get:function(){return c.isAligned}}),n(44)),f=(Object.defineProperty(t,"cleanFormatting",{enumerable:!0,get:function(){return d.cleanFormatting}}),n(11)),p=(Object.defineProperty(t,"hasNode",{enumerable:!0,get:function(){return f.hasNode}}),Object.defineProperty(t,"activeNode",{enumerable:!0,get:function(){return f.activeNode}}),Object.defineProperty(t,"formatBlockElements",{enumerable:!0,get:function(){return f.formatBlockElements}}),Object.defineProperty(t,"getBlockFormats",{enumerable:!0,get:function(){return f.getBlockFormats}}),Object.defineProperty(t,"parentBlockFormat",{enumerable:!0,get:function(){return f.parentBlockFormat}}),Object.defineProperty(t,"changeTextBlock",{enumerable:!0,get:function(){return f.changeTextBlock}}),Object.defineProperty(t,"blockNodes",{enumerable:!0,get:function(){return f.blockNodes}}),Object.defineProperty(t,"cleanTextBlockFormatting",{enumerable:!0,get:function(){return f.cleanTextBlockFormatting}}),n(7)),g=(Object.defineProperty(t,"hasMark",{enumerable:!0,get:function(){return p.hasMark}}),Object.defineProperty(t,"getMark",{enumerable:!0,get:function(){return p.getMark}}),Object.defineProperty(t,"getActiveMarks",{enumerable:!0,get:function(){return p.getActiveMarks}}),Object.defineProperty(t,"removeAllMarks",{enumerable:!0,get:function(){return p.removeAllMarks}}),Object.defineProperty(t,"cleanMarks",{enumerable:!0,get:function(){return p.cleanMarks}}),Object.defineProperty(t,"selectionMarks",{enumerable:!0,get:function(){return p.selectionMarks}}),n(43)),m=(Object.defineProperty(t,"indent",{enumerable:!0,get:function(){return g.indent}}),Object.defineProperty(t,"canIndentAsListItem",{enumerable:!0,get:function(){return g.canIndentAsListItem}}),Object.defineProperty(t,"outdent",{enumerable:!0,get:function(){return g.outdent}}),Object.defineProperty(t,"canOutdentAsListItem",{enumerable:!0,get:function(){return g.canOutdentAsListItem}}),Object.defineProperty(t,"isIndented",{enumerable:!0,get:function(){return g.isIndented}}),Object.defineProperty(t,"canBeIndented",{enumerable:!0,get:function(){return g.canBeIndented}}),Object.defineProperty(t,"indentBlocks",{enumerable:!0,get:function(){return g.indentBlocks}}),n(21)),y=(Object.defineProperty(t,"toggleOrderedList",{enumerable:!0,get:function(){return m.toggleOrderedList}}),Object.defineProperty(t,"toggleUnorderedList",{enumerable:!0,get:function(){return m.toggleUnorderedList}}),Object.defineProperty(t,"toggleList",{enumerable:!0,get:function(){return m.toggleList}}),Object.defineProperty(t,"listStyle",{enumerable:!0,get:function(){return m.listStyle}}),n(22)),h=(Object.defineProperty(t,"blockquote",{enumerable:!0,get:function(){return y.blockquote}}),Object.defineProperty(t,"liftBlockquote",{enumerable:!0,get:function(){return y.liftBlockquote}}),n(3)),b=(Object.defineProperty(t,"hasSameMarkup",{enumerable:!0,get:function(){return h.hasSameMarkup}}),Object.defineProperty(t,"getSelectionText",{enumerable:!0,get:function(){return h.getSelectionText}}),Object.defineProperty(t,"getNodeFromSelection",{enumerable:!0,get:function(){return h.getNodeFromSelection}}),Object.defineProperty(t,"selectedLineTextOnly",{enumerable:!0,get:function(){return h.selectedLineTextOnly}}),Object.defineProperty(t,"expandSelection",{enumerable:!0,get:function(){return h.expandSelection}}),Object.defineProperty(t,"expandToWordWrap",{enumerable:!0,get:function(){return h.expandToWordWrap}}),Object.defineProperty(t,"canInsert",{enumerable:!0,get:function(){return h.canInsert}}),Object.defineProperty(t,"insertNode",{enumerable:!0,get:function(){return h.insertNode}}),Object.defineProperty(t,"indentHtml",{enumerable:!0,get:function(){return h.indentHtml}}),n(42)),v=(Object.defineProperty(t,"alignLeftRules",{enumerable:!0,get:function(){return b.alignLeftRules}}),Object.defineProperty(t,"alignCenterRules",{enumerable:!0,get:function(){return b.alignCenterRules}}),Object.defineProperty(t,"alignRightRules",{enumerable:!0,get:function(){return b.alignRightRules}}),Object.defineProperty(t,"alignJustifyRules",{enumerable:!0,get:function(){return b.alignJustifyRules}}),Object.defineProperty(t,"alignRemoveRules",{enumerable:!0,get:function(){return b.alignRemoveRules}}),n(24)),k=(Object.defineProperty(t,"indentRules",{enumerable:!0,get:function(){return v.indentRules}}),Object.defineProperty(t,"outdentRules",{enumerable:!0,get:function(){return v.outdentRules}}),n(13)),w=(Object.defineProperty(t,"nodes",{enumerable:!0,get:function(){return k.nodes}}),Object.defineProperty(t,"marks",{enumerable:!0,get:function(){return k.marks}}),n(41)),_=(Object.defineProperty(t,"buildKeymap",{enumerable:!0,get:function(){return w.buildKeymap}}),Object.defineProperty(t,"buildListKeymap",{enumerable:!0,get:function(){return w.buildListKeymap}}),n(18)),M=(Object.defineProperty(t,"bold",{enumerable:!0,get:function(){return _.bold}}),Object.defineProperty(t,"italic",{enumerable:!0,get:function(){return _.italic}}),Object.defineProperty(t,"underline",{enumerable:!0,get:function(){return _.underline}}),Object.defineProperty(t,"strikethrough",{enumerable:!0,get:function(){return _.strikethrough}}),Object.defineProperty(t,"subscript",{enumerable:!0,get:function(){return _.subscript}}),Object.defineProperty(t,"superscript",{enumerable:!0,get:function(){return _.superscript}}),Object.defineProperty(t,"link",{enumerable:!0,get:function(){return _.link}}),n(40)),O=(Object.defineProperty(t,"sanitize",{enumerable:!0,get:function(){return M.sanitize}}),Object.defineProperty(t,"removeComments",{enumerable:!0,get:function(){return M.removeComments}}),Object.defineProperty(t,"removeTag",{enumerable:!0,get:function(){return M.removeTag}}),Object.defineProperty(t,"pasteCleanup",{enumerable:!0,get:function(){return M.pasteCleanup}}),Object.defineProperty(t,"sanitizeClassAttr",{enumerable:!0,get:function(){return M.sanitizeClassAttr}}),Object.defineProperty(t,"sanitizeStyleAttr",{enumerable:!0,get:function(){return M.sanitizeStyleAttr}}),Object.defineProperty(t,"removeAttribute",{enumerable:!0,get:function(){return M.removeAttribute}}),Object.defineProperty(t,"replaceImageSourcesFromRtf",{enumerable:!0,get:function(){return M.replaceImageSourcesFromRtf}}),n(17)),R=(Object.defineProperty(t,"convertMsLists",{enumerable:!0,get:function(){return O.convertMsLists}}),n(39)),S=(Object.defineProperty(t,"find",{enumerable:!0,get:function(){return R.find}}),Object.defineProperty(t,"findAt",{enumerable:!0,get:function(){return R.findAt}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return R.findAll}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return R.replace}}),Object.defineProperty(t,"replaceAll",{enumerable:!0,get:function(){return R.replaceAll}}),n(38)),A=(Object.defineProperty(t,"placeholder",{enumerable:!0,get:function(){return S.placeholder}}),n(37)),x=(Object.defineProperty(t,"spacesFix",{enumerable:!0,get:function(){return A.spacesFix}}),n(36)),C=(Object.defineProperty(t,"textHighlight",{enumerable:!0,get:function(){return x.textHighlight}}),Object.defineProperty(t,"textHighlightKey",{enumerable:!0,get:function(){return x.textHighlightKey}}),n(35)),P=(Object.defineProperty(t,"imageResizing",{enumerable:!0,get:function(){return C.imageResizing}}),Object.defineProperty(t,"imageResizeKey",{enumerable:!0,get:function(){return C.imageResizeKey}}),n(34)),T=(Object.defineProperty(t,"caretColor",{enumerable:!0,get:function(){return P.caretColor}}),Object.defineProperty(t,"caretColorKey",{enumerable:!0,get:function(){return P.caretColorKey}}),n(33)),z=(Object.defineProperty(t,"tableResizing",{enumerable:!0,get:function(){return T.tableResizing}}),Object.defineProperty(t,"tableResizeKey",{enumerable:!0,get:function(){return T.tableResizeKey}}),Object.defineProperty(t,"tableColumnResizeKey",{enumerable:!0,get:function(){return T.tableColumnResizeKey}}),Object.defineProperty(t,"tableRowResizeKey",{enumerable:!0,get:function(){return T.tableRowResizeKey}}),o.__exportStar(n(10),t),o.__exportStar(n(28),t),o.__exportStar(n(27),t),o.__exportStar(n(20),t),o.__exportStar(n(19),t),o.__exportStar(n(26),t),o.__exportStar(n(5),t),o.__exportStar(n(14),t),o.__exportStar(n(0),t),n(6)),j=(Object.defineProperty(t,"TableMap",{enumerable:!0,get:function(){return z.TableMap}}),Object.defineProperty(t,"tableEditing",{enumerable:!0,get:function(){return z.tableEditing}}),Object.defineProperty(t,"tableEditingKey",{enumerable:!0,get:function(){return z.tableEditingKey}}),Object.defineProperty(t,"tableNodeTypes",{enumerable:!0,get:function(){return z.tableNodeTypes}}),Object.defineProperty(t,"tableNodes",{enumerable:!0,get:function(){return z.tableNodes}}),Object.defineProperty(t,"fixTables",{enumerable:!0,get:function(){return z.fixTables}}),Object.defineProperty(t,"fixTablesKey",{enumerable:!0,get:function(){return z.fixTablesKey}}),Object.defineProperty(t,"isInTable",{enumerable:!0,get:function(){return z.isInTable}}),Object.defineProperty(t,"deleteTable",{enumerable:!0,get:function(){return z.deleteTable}}),Object.defineProperty(t,"inSameTable",{enumerable:!0,get:function(){return z.inSameTable}}),Object.defineProperty(t,"CellSelection",{enumerable:!0,get:function(){return z.CellSelection}}),Object.defineProperty(t,"selectedRect",{enumerable:!0,get:function(){return z.selectedRect}}),Object.defineProperty(t,"selectionCell",{enumerable:!0,get:function(){return z.selectionCell}}),Object.defineProperty(t,"setCellAttr",{enumerable:!0,get:function(){return z.setCellAttr}}),Object.defineProperty(t,"goToNextCell",{enumerable:!0,get:function(){return z.goToNextCell}}),Object.defineProperty(t,"toggleHeader",{enumerable:!0,get:function(){return z.toggleHeader}}),Object.defineProperty(t,"toggleHeaderCell",{enumerable:!0,get:function(){return z.toggleHeaderCell}}),Object.defineProperty(t,"toggleHeaderColumn",{enumerable:!0,get:function(){return z.toggleHeaderColumn}}),Object.defineProperty(t,"toggleHeaderRow",{enumerable:!0,get:function(){return z.toggleHeaderRow}}),Object.defineProperty(t,"splitCell",{enumerable:!0,get:function(){return z.splitCell}}),Object.defineProperty(t,"splitCellWithType",{enumerable:!0,get:function(){return z.splitCellWithType}}),Object.defineProperty(t,"mergeCells",{enumerable:!0,get:function(){return z.mergeCells}}),Object.defineProperty(t,"deleteRow",{enumerable:!0,get:function(){return z.deleteRow}}),Object.defineProperty(t,"rowIsHeader",{enumerable:!0,get:function(){return z.rowIsHeader}}),Object.defineProperty(t,"addRow",{enumerable:!0,get:function(){return z.addRow}}),Object.defineProperty(t,"addColSpan",{enumerable:!0,get:function(){return z.addColSpan}}),Object.defineProperty(t,"addColumn",{enumerable:!0,get:function(){return z.addColumn}}),Object.defineProperty(t,"colCount",{enumerable:!0,get:function(){return z.colCount}}),Object.defineProperty(t,"columnIsHeader",{enumerable:!0,get:function(){return z.columnIsHeader}}),Object.defineProperty(t,"columnResizing",{enumerable:!0,get:function(){return z.columnResizing}}),Object.defineProperty(t,"columnResizingPluginKey",{enumerable:!0,get:function(){return z.columnResizingPluginKey}}),Object.defineProperty(t,"updateColumnsOnResize",{enumerable:!0,get:function(){return z.updateColumnsOnResize}}),Object.defineProperty(t,"cellAround",{enumerable:!0,get:function(){return z.cellAround}}),Object.defineProperty(t,"findCell",{enumerable:!0,get:function(){return z.findCell}}),Object.defineProperty(t,"removeColSpan",{enumerable:!0,get:function(){return z.removeColSpan}}),Object.defineProperty(t,"moveCellForward",{enumerable:!0,get:function(){return z.moveCellForward}}),Object.defineProperty(t,"nextCell",{enumerable:!0,get:function(){return z.nextCell}}),o.__exportStar(n(8),t),o.__exportStar(n(2),t),n(25)),I=(Object.defineProperty(t,"createTable",{enumerable:!0,get:function(){return j.createTable}}),Object.defineProperty(t,"addRowAfter",{enumerable:!0,get:function(){return j.addRowAfter}}),Object.defineProperty(t,"addRowBefore",{enumerable:!0,get:function(){return j.addRowBefore}}),Object.defineProperty(t,"addColumnBefore",{enumerable:!0,get:function(){return j.addColumnBefore}}),Object.defineProperty(t,"addColumnAfter",{enumerable:!0,get:function(){return j.addColumnAfter}}),Object.defineProperty(t,"deleteColumn",{enumerable:!0,get:function(){return j.deleteColumn}}),Object.defineProperty(t,"pmAddColumnBefore",{enumerable:!0,get:function(){return j.pmAddColumnBefore}}),Object.defineProperty(t,"pmAddColumnAfter",{enumerable:!0,get:function(){return j.pmAddColumnAfter}}),Object.defineProperty(t,"pmAddRowAfter",{enumerable:!0,get:function(){return j.pmAddRowAfter}}),Object.defineProperty(t,"pmAddRowBefore",{enumerable:!0,get:function(){return j.pmAddRowBefore}}),Object.defineProperty(t,"pmDeleteColumn",{enumerable:!0,get:function(){return j.pmDeleteColumn}}),t);for(r in I)N(r,I[r])}],o={},r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=49)}}});